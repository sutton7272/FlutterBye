import{b as O,r as N,c as S,d as u,am as y,j as e,C as t,a as i,a8 as E,aj as G,o as q,Z as Q,T as V,i as W,k as h,n as g,e as d,f as x,a7 as K,B as o,q as L,g as T,ab as C,a$ as Z,I as f,h as w,a2 as H}from"./index-CeACcdR0.js";function X(){const{toast:j}=O(),[p,z]=N.useState("demo-user"),[b,U]=N.useState(""),[A,D]=N.useState("flby-premium"),[I,M]=N.useState(29.99),r=S({queryKey:["/api/admin/marketing-analytics"],refetchInterval:6e4}),v=S({queryKey:["/api/admin/marketing-insights"],refetchInterval:3e5}),P=S({queryKey:["/api/admin/site-wide-pricing"],refetchInterval:9e5}),c=u({mutationFn:async s=>y("/api/admin/analyze-user-behavior","POST",s),onSuccess:()=>{j({title:"User Behavior Analyzed",description:"Comprehensive behavioral analysis complete"})}}),l=u({mutationFn:async s=>y("/api/admin/dynamic-pricing","POST",s),onSuccess:()=>{j({title:"Dynamic Pricing Generated",description:"AI-powered pricing recommendation calculated"})}}),m=u({mutationFn:async s=>y("/api/pricing/personalized","POST",s),onSuccess:()=>{j({title:"Personalized Pricing Generated",description:"User-specific pricing optimization complete"})}}),n=u({mutationFn:async s=>y("/api/admin/user-activity-factors","POST",s),onSuccess:()=>{j({title:"Activity Factors Analyzed",description:"User activity patterns and pricing factors calculated"})}}),R=()=>{c.mutate({userId:p,walletAddress:b||void 0})},$=()=>{l.mutate({productId:A,basePrice:I})},k=()=>{m.mutate({userId:p,walletAddress:b||void 0})},B=()=>{n.mutate({userId:p,walletAddress:b||void 0})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-blue-400 via-green-400 to-purple-400 bg-clip-text text-transparent mb-4",children:"AI Marketing Analytics & Dynamic Pricing"}),e.jsx("p",{className:"text-xl text-gray-300 max-w-4xl mx-auto",children:"Comprehensive marketing insights from user behavior and wallet analysis with AI-powered dynamic pricing optimization across all products."})]}),r.data&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(t,{className:"bg-slate-800/50 border-blue-500/30",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-8 w-8 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r.data.dashboard.overview.totalUsers}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Users"})]})]})})}),e.jsx(t,{className:"bg-slate-800/50 border-green-500/30",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{className:"h-8 w-8 text-green-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",r.data.dashboard.overview.avgRevenuePerUser]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Avg Revenue/User"})]})]})})}),e.jsx(t,{className:"bg-slate-800/50 border-purple-500/30",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-8 w-8 text-purple-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-white",children:[Math.round(r.data.dashboard.overview.conversionRate*100),"%"]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Conversion Rate"})]})]})})}),e.jsx(t,{className:"bg-slate-800/50 border-yellow-500/30",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Q,{className:"h-8 w-8 text-yellow-400"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-white",children:[r.data.dashboard.overview.viralCoefficient.toFixed(1),"x"]}),e.jsx("p",{className:"text-sm text-gray-400",children:"Viral Coefficient"})]})]})})})]}),e.jsxs(V,{defaultValue:"dashboard",className:"space-y-6",children:[e.jsxs(W,{className:"grid w-full grid-cols-5 bg-slate-800/50",children:[e.jsx(h,{value:"dashboard",children:"Dashboard"}),e.jsx(h,{value:"segments",children:"User Segments"}),e.jsx(h,{value:"pricing",children:"Dynamic Pricing"}),e.jsx(h,{value:"behavior",children:"User Analysis"}),e.jsx(h,{value:"insights",children:"AI Insights"})]}),e.jsx(g,{value:"dashboard",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.data&&e.jsxs(t,{className:"bg-slate-800/50 border-blue-500/30",children:[e.jsx(d,{children:e.jsxs(x,{className:"text-2xl text-blue-400 flex items-center",children:[e.jsx(K,{className:"mr-2"}),"User Segments"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:r.data.dashboard.userSegments.map(s=>e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-semibold text-white",children:s.name}),e.jsxs(o,{variant:"outline",className:"text-blue-400 border-blue-400",children:[s.userCount," users"]})]}),e.jsx("p",{className:"text-sm text-gray-300 mb-2",children:s.description}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Avg Spend"}),e.jsxs("p",{className:"text-green-400 font-semibold",children:["$",s.behavior.avgSpend]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Conversion Rate"}),e.jsxs("p",{className:"text-purple-400 font-semibold",children:[Math.round(s.behavior.conversionRate*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Retention"}),e.jsxs("p",{className:"text-blue-400 font-semibold",children:[Math.round(s.behavior.retentionRate*100),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-400",children:"Viral Factor"}),e.jsxs("p",{className:"text-yellow-400 font-semibold",children:[s.behavior.viralCoefficient,"x"]})]})]})]},s.id))})})]}),r.data&&e.jsxs(t,{className:"bg-slate-800/50 border-green-500/30",children:[e.jsx(d,{children:e.jsxs(x,{className:"text-2xl text-green-400 flex items-center",children:[e.jsx(L,{className:"mr-2"}),"Behavior Trends"]})}),e.jsx(i,{children:e.jsx("div",{className:"space-y-4",children:r.data.dashboard.behaviorTrends.map((s,a)=>e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-semibold text-white",children:s.trend}),e.jsxs(o,{variant:"outline",className:`${s.impact==="high"?"text-red-400 border-red-400":s.impact==="medium"?"text-yellow-400 border-yellow-400":"text-green-400 border-green-400"}`,children:[s.impact," impact"]})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:s.timeframe}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["+",s.growth,"%"]})]}),e.jsx("p",{className:"text-sm text-gray-300",children:s.predictedOutcome})]},a))})})]})]})}),e.jsx(g,{value:"segments",children:e.jsxs(t,{className:"bg-slate-800/50 border-purple-500/30",children:[e.jsxs(d,{children:[e.jsx(x,{className:"text-2xl text-purple-400",children:"Detailed User Segmentation Analysis"}),e.jsx(T,{children:"AI-powered user segments with behavioral clustering and pricing preferences"})]}),e.jsx(i,{children:v.data&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.data.insights.userSegments.map(s=>e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg",children:[e.jsx("h3",{className:"text-xl font-bold text-purple-400 mb-2",children:s.name}),e.jsx("p",{className:"text-gray-300 text-sm mb-4",children:s.description}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"User Count"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:s.userCount})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Characteristics"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.characteristics.map((a,F)=>e.jsx(o,{variant:"outline",className:"text-xs",children:a},F))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Preferred Price Range"}),e.jsxs("p",{className:"text-green-400 font-semibold",children:["$",s.preferredPricing.priceRange[0]," - $",s.preferredPricing.priceRange[1]]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Discount Sensitivity"}),e.jsx(C,{value:s.preferredPricing.discountSensitivity*100,className:"h-2"}),e.jsxs("p",{className:"text-xs text-yellow-400 mt-1",children:[Math.round(s.preferredPricing.discountSensitivity*100),"% sensitive"]})]})]})]},s.id))})})]})}),e.jsx(g,{value:"pricing",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{className:"bg-slate-800/50 border-yellow-500/30",children:[e.jsx(d,{children:e.jsxs(x,{className:"text-2xl text-yellow-400 flex items-center",children:[e.jsx(Z,{className:"mr-2"}),"Dynamic Pricing Controls"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Product ID"}),e.jsx(f,{value:A,onChange:s=>D(s.target.value),className:"bg-slate-700 border-slate-600",placeholder:"Enter product ID..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Base Price ($)"}),e.jsx(f,{type:"number",value:I,onChange:s=>M(Number(s.target.value)),className:"bg-slate-700 border-slate-600",placeholder:"Enter base price..."})]}),e.jsx(w,{onClick:$,disabled:l.isPending,className:"w-full bg-yellow-600 hover:bg-yellow-700",children:l.isPending?"Calculating...":"Generate Dynamic Pricing"}),l.data&&e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg mt-4",children:[e.jsx("h4",{className:"font-semibold text-yellow-400 mb-2",children:"Pricing Recommendation"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Original Price"}),e.jsxs("p",{className:"text-white font-semibold",children:["$",l.data.recommendation.currentPrice]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Recommended Price"}),e.jsxs("p",{className:"text-green-400 font-semibold",children:["$",l.data.recommendation.recommendedPrice]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Price Change"}),e.jsxs("p",{className:`font-semibold ${l.data.recommendation.priceChange>0?"text-green-400":"text-red-400"}`,children:[l.data.recommendation.priceChange>0?"+":"",l.data.recommendation.priceChange.toFixed(1),"%"]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Reasoning"}),e.jsx("div",{className:"space-y-1",children:l.data.recommendation.reasoning.map((s,a)=>e.jsxs("p",{className:"text-xs text-gray-300",children:["• ",s]},a))})]})]})]})]}),e.jsxs(t,{className:"bg-slate-800/50 border-green-500/30",children:[e.jsx(d,{children:e.jsx(x,{className:"text-2xl text-green-400",children:"Site-wide Pricing Status"})}),e.jsx(i,{children:P.data&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"Global Modifiers"}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(P.data.pricing.globalModifiers).map(([s,a])=>e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 capitalize",children:s.replace(/([A-Z])/g," $1")}),e.jsxs("p",{className:"text-white font-semibold",children:[a.toFixed(2),"x"]})]},s))})]}),e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"Active Products"}),e.jsx("div",{className:"space-y-2",children:P.data.pricing.products.slice(0,6).map(s=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-300",children:s.productName}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["$",s.basePricing.price]}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["$",s.dynamicPricing.currentPrice]})]})]},s.productId))})]})]})})]})]})}),e.jsx(g,{value:"behavior",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(t,{className:"bg-slate-800/50 border-blue-500/30",children:[e.jsx(d,{children:e.jsxs(x,{className:"text-2xl text-blue-400 flex items-center",children:[e.jsx(H,{className:"mr-2"}),"User Behavior Analysis"]})}),e.jsxs(i,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"User ID"}),e.jsx(f,{value:p,onChange:s=>z(s.target.value),className:"bg-slate-700 border-slate-600",placeholder:"Enter user ID..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Wallet Address (Optional)"}),e.jsx(f,{value:b,onChange:s=>U(s.target.value),className:"bg-slate-700 border-slate-600",placeholder:"Enter wallet address..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(w,{onClick:R,disabled:c.isPending,className:"bg-blue-600 hover:bg-blue-700",children:c.isPending?"Analyzing...":"Analyze Behavior"}),e.jsx(w,{onClick:B,disabled:n.isPending,className:"bg-purple-600 hover:bg-purple-700",children:n.isPending?"Calculating...":"Activity Factors"})]}),e.jsx(w,{onClick:k,disabled:m.isPending,className:"w-full bg-green-600 hover:bg-green-700",children:m.isPending?"Generating...":"Get Personalized Pricing"})]})]}),e.jsxs(t,{className:"bg-slate-800/50 border-purple-500/30",children:[e.jsx(d,{children:e.jsx(x,{className:"text-2xl text-purple-400",children:"Analysis Results"})}),e.jsxs(i,{className:"space-y-4",children:[c.data&&e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-400 mb-2",children:"User Behavior Analysis"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Total Sessions"}),e.jsx("p",{className:"text-white font-semibold",children:c.data.behavior.sessionMetrics.totalSessions})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Avg Session (min)"}),e.jsx("p",{className:"text-white font-semibold",children:Math.round(c.data.behavior.sessionMetrics.avgSessionDuration/60)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Total Transactions"}),e.jsx("p",{className:"text-green-400 font-semibold",children:c.data.behavior.transactionBehavior.totalTransactions})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Avg Transaction ($)"}),e.jsxs("p",{className:"text-green-400 font-semibold",children:["$",c.data.behavior.transactionBehavior.avgTransactionValue.toFixed(2)]})]})]})]}),n.data&&e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-purple-400 mb-2",children:"Activity Factors"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Activity Score"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{value:n.data.factors.activityScore,className:"flex-1"}),e.jsx("span",{className:"text-white font-semibold",children:n.data.factors.activityScore})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Engagement Level"}),e.jsx(o,{variant:"outline",className:"capitalize",children:n.data.factors.engagementLevel})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Spending Pattern"}),e.jsx(o,{variant:"outline",className:"capitalize",children:n.data.factors.spendingPattern})]})]})]})]}),m.data&&e.jsxs("div",{className:"bg-slate-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-green-400 mb-2",children:"Personalized Pricing"}),e.jsx("div",{className:"space-y-2",children:Object.entries(m.data.personalizedPricing.personalizedPrices).slice(0,3).map(([s,a])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-300 capitalize",children:s.replace(/-/g," ")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("span",{className:"text-xs text-gray-400 line-through",children:["$",a.originalPrice]}),e.jsxs("span",{className:"text-green-400 font-semibold",children:["$",a.personalizedPrice]}),e.jsxs(o,{variant:"outline",className:"text-xs text-yellow-400",children:["-",a.discount,"%"]})]})]},s))})]})]})]})]})}),e.jsx(g,{value:"insights",children:e.jsxs(t,{className:"bg-slate-800/50 border-orange-500/30",children:[e.jsxs(d,{children:[e.jsx(x,{className:"text-2xl text-orange-400",children:"AI Marketing Recommendations"}),e.jsx(T,{children:"AI-powered actionable insights for marketing optimization and revenue growth"})]}),e.jsx(i,{children:v.data&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:v.data.insights.recommendations.map((s,a)=>e.jsxs("div",{className:"bg-slate-700 p-6 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h3",{className:"text-lg font-bold text-orange-400",children:s.category}),e.jsxs(o,{variant:"outline",className:`${s.priority==="high"?"text-red-400 border-red-400":s.priority==="medium"?"text-yellow-400 border-yellow-400":"text-green-400 border-green-400"}`,children:[s.priority," priority"]})]}),e.jsx("p",{className:"text-gray-300 mb-3",children:s.recommendation}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Expected Impact"}),e.jsx("p",{className:"text-green-400 font-semibold",children:s.expectedImpact})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Implementation"}),e.jsx("p",{className:"text-gray-300 text-sm",children:s.implementation})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Confidence Score"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{value:s.confidenceScore*100,className:"flex-1 h-2"}),e.jsxs("span",{className:"text-white text-sm",children:[Math.round(s.confidenceScore*100),"%"]})]})]})]})]},a))})})]})})]})]})})}export{X as default};
