import{r,b as T,d as A,j as e,C as z,e as F,f as H,o as P,g as E,a as I,aG as g,I as q,s as W,t as D,v as G,w as B,x as o,h,aD as L,S as R,B as y,W as $,aP as M,aw as U,am as V}from"./index-CeACcdR0.js";function O({onHoldersSelected:v}){const[i,k]=r.useState(""),[m,N]=r.useState("25"),[c,f]=r.useState([]),[l,x]=r.useState(new Set),[b,p]=r.useState(null),{toast:n}=T(),d=A({mutationFn:async({token:s,count:a})=>{const t=await V("POST","/api/tokens/analyze-holders",{token:s,count:a}),j=t.json?await t.json():t;return Array.isArray(j)?j:[]},onSuccess:s=>{Array.isArray(s)&&s.length>0?(f(s),x(new Set(s.map((a,t)=>t))),n({title:"Analysis Complete",description:`Found ${s.length} top token holders`})):n({title:"No Data Found",description:"No token holders found for this token",variant:"destructive"})},onError:s=>{n({title:"Analysis Failed",description:s instanceof Error?s.message:"Failed to analyze token holders",variant:"destructive"})}}),S=()=>{if(!i.trim()){n({title:"Token Required",description:"Please enter a token address or symbol",variant:"destructive"});return}d.mutate({token:i.trim(),count:parseInt(m)})},C=()=>{const s=c.filter((a,t)=>l.has(t));v(s),n({title:"Holders Selected",description:`Selected ${s.length} wallet addresses for targeting`})},u=s=>{const a=new Set(l);a.has(s)?a.delete(s):a.add(s),x(a)},w=async s=>{try{await navigator.clipboard.writeText(s),p(s),setTimeout(()=>p(null),2e3),n({title:"Address Copied",description:"Wallet address copied to clipboard"})}catch{n({title:"Copy Failed",description:"Could not copy address to clipboard",variant:"destructive"})}};return e.jsx("div",{className:"mt-4 space-y-4",children:e.jsxs(z,{className:"electric-frame",children:[e.jsxs(F,{children:[e.jsxs(H,{className:"flex items-center text-gradient",children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Token Holder Analysis"]}),e.jsx(E,{children:"Analyze top holders of any Solana token for targeted marketing"})]}),e.jsxs(I,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"token-input",children:"Token Address or Symbol"}),e.jsx(q,{id:"token-input",value:i,onChange:s=>k(s.target.value),placeholder:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",className:"font-mono text-sm pulse-border"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"holder-count",children:"Number of Holders"}),e.jsxs(W,{value:m,onValueChange:N,children:[e.jsx(D,{children:e.jsx(G,{})}),e.jsxs(B,{children:[e.jsx(o,{value:"25",children:"Top 25"}),e.jsx(o,{value:"50",children:"Top 50"}),e.jsx(o,{value:"100",children:"Top 100"}),e.jsx(o,{value:"250",children:"Top 250"}),e.jsx(o,{value:"500",children:"Top 500"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(h,{onClick:S,disabled:d.isPending,className:"w-full",children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Analyze"]})})})]}),c.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-semibold",children:"Top Token Holders"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(y,{variant:"secondary",children:[l.size," selected"]}),e.jsx(h,{onClick:C,disabled:l.size===0,size:"sm",children:"Use Selected Wallets"})]})]}),e.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:c.map((s,a)=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${l.has(a)?"bg-blue-50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800":"hover:bg-gray-50 dark:hover:bg-gray-900"}`,onClick:()=>u(a),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(y,{variant:"outline",children:["#",s.rank]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"font-mono text-sm",children:[s.address.slice(0,8),"...",s.address.slice(-8)]}),e.jsx(h,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),w(s.address)},className:"p-1 h-auto",children:b===s.address?e.jsx(M,{className:"w-3 h-3 text-green-500"}):e.jsx(U,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.balance.toLocaleString()," tokens (",s.percentage.toFixed(2),"%)"]})]})]}),e.jsx("input",{type:"checkbox",checked:l.has(a),onChange:()=>u(a),className:"w-4 h-4",onClick:t=>t.stopPropagation()})]})},s.address))})]})]})]})})}export{O as T};
