import{b as q,r as o,j as e,as as z,bk as V,h as d,aM as H,at as R,au as U,av as Y,aG as p,s as G,t as J,v as K,w as Q,x as h,ax as k,ca as C,cb as A,I as j,C as S,a as T,a$ as F,B as X,aA as Z,aY as W,ba as ee,E as se,bv as te}from"./index-CeACcdR0.js";import{F as _}from"./facebook-Dc0EEsQ6.js";import{T as ae}from"./test-tube-CTtbwcQJ.js";function ce(){var v;const{toast:c}=q(),[N,r]=o.useState([]),[I,g]=o.useState(!1),[y,f]=o.useState(null),[w,P]=o.useState({}),[a,m]=o.useState({platform:"Twitter",username:"",displayName:"",credentials:{}}),x={Twitter:{icon:k,color:"text-blue-400",bgColor:"bg-blue-900/20 border-blue-500/30",fields:[{key:"api_key",label:"API Key",type:"password"},{key:"api_secret",label:"API Secret",type:"password"},{key:"access_token",label:"Access Token",type:"password"},{key:"access_token_secret",label:"Access Token Secret",type:"password"},{key:"bearer_token",label:"Bearer Token (Optional)",type:"password"}]},Instagram:{icon:C,color:"text-pink-400",bgColor:"bg-pink-900/20 border-pink-500/30",fields:[{key:"access_token",label:"Access Token",type:"password"},{key:"app_id",label:"App ID",type:"text"},{key:"app_secret",label:"App Secret",type:"password"}]},LinkedIn:{icon:A,color:"text-blue-600",bgColor:"bg-blue-900/20 border-blue-500/30",fields:[{key:"client_id",label:"Client ID",type:"text"},{key:"client_secret",label:"Client Secret",type:"password"},{key:"access_token",label:"Access Token",type:"password"}]},Facebook:{icon:_,color:"text-blue-500",bgColor:"bg-blue-900/20 border-blue-500/30",fields:[{key:"page_access_token",label:"Page Access Token",type:"password"},{key:"page_id",label:"Page ID",type:"text"},{key:"app_secret",label:"App Secret",type:"password"}]}},u=[{id:"1",platform:"Twitter",username:"@FlutterByeHQ",displayName:"FlutterBye Official",isConnected:!0,lastSync:"2025-01-14T12:00:00Z",followers:15420,following:892,posts:1247,apiCredentials:{api_key:"sk-*********************",api_secret:"sk-*********************",access_token:"sk-*********************",access_token_secret:"sk-*********************"}}];o.useEffect(()=>{D()},[]);const D=async()=>{try{const s=await fetch("/api/social-automation/engagement-accounts");if(s.ok){const n=await s.json();r(n.accounts||u)}else r(u)}catch(s){console.error("Failed to fetch accounts:",s),r(u)}},E=async()=>{if(!a.username||!a.displayName||!a.platform){c({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}const i=x[a.platform].fields.filter(t=>!t.label.includes("Optional")).filter(t=>{var l;return!((l=a.credentials[t.key])!=null&&l.trim())});if(i.length>0){c({title:"Missing API Credentials",description:`Please provide: ${i.map(t=>t.label).join(", ")}`,variant:"destructive"});return}try{const t={...a,apiCredentials:a.credentials,id:Date.now().toString(),isConnected:!1,lastSync:new Date().toISOString(),followers:0,following:0,posts:0},l=await fetch("/api/social-automation/engagement-accounts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(l.ok){const b=await l.json();r(M=>[...M,b.account||t]),m({platform:"Twitter",username:"",displayName:"",credentials:{}}),g(!1),c({title:"Account Added Successfully!",description:`${t.displayName} has been added with individual API keys`,className:"bg-green-900 border-green-500 text-white"})}else throw new Error("Failed to add account")}catch{c({title:"Failed to add account",description:"Please check your API credentials and try again",variant:"destructive"})}},L=async s=>{f(s);try{const n=await fetch(`/api/social-automation/engagement-accounts/${s}/test`,{method:"POST"}),i=await n.json();n.ok&&i.success?(c({title:"âœ… Connection Test Successful!",description:i.message||"Account is properly connected",className:"bg-green-900 border-green-500 text-white"}),r(t=>t.map(l=>l.id===s?{...l,isConnected:!0,lastSync:new Date().toISOString()}:l))):(c({title:"Connection Test Failed",description:i.message||"Unable to connect to account",variant:"destructive"}),r(t=>t.map(l=>l.id===s?{...l,isConnected:!1}:l)))}catch{c({title:"Test Failed",description:"Could not test account connection",variant:"destructive"})}finally{f(null)}},O=async s=>{try{(await fetch(`/api/social-automation/engagement-accounts/${s}`,{method:"DELETE"})).ok&&(r(i=>i.filter(t=>t.id!==s)),c({title:"Account removed successfully",className:"bg-green-900 border-green-500 text-white"}))}catch{c({title:"Failed to remove account",variant:"destructive"})}},B=s=>{P(n=>({...n,[s]:!n[s]}))},$=()=>x[a.platform];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"ðŸ”— Social Media Account Management"}),e.jsx("p",{className:"text-slate-300 text-lg",children:"Connect and manage your social media accounts for automated posting and analytics"})]}),e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white",children:"Connected Accounts"}),e.jsxs(z,{open:I,onOpenChange:g,children:[e.jsx(V,{asChild:!0,children:e.jsxs(d,{className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Add Social Account"]})}),e.jsxs(R,{className:"bg-slate-800 border-purple-500/30 max-w-2xl",children:[e.jsx(U,{children:e.jsx(Y,{className:"text-purple-400",children:"Connect New Social Account"})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"platform",children:"Platform"}),e.jsxs(G,{value:a.platform,onValueChange:s=>{m({...a,platform:s,credentials:{}})},children:[e.jsx(J,{className:"bg-slate-700 border-slate-600",children:e.jsx(K,{})}),e.jsxs(Q,{children:[e.jsx(h,{value:"Twitter",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Twitter"]})}),e.jsx(h,{value:"Instagram",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Instagram"]})}),e.jsx(h,{value:"LinkedIn",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4"}),"LinkedIn"]})}),e.jsx(h,{value:"Facebook",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4"}),"Facebook"]})})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"username",children:"Username"}),e.jsx(j,{id:"username",placeholder:"@yourusername",value:a.username,onChange:s=>m({...a,username:s.target.value}),className:"bg-slate-700 border-slate-600 text-white"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"displayName",children:"Display Name"}),e.jsx(j,{id:"displayName",placeholder:"Your Account Name",value:a.displayName,onChange:s=>m({...a,displayName:s.target.value}),className:"bg-slate-700 border-slate-600 text-white"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"API Credentials"}),(v=$())==null?void 0:v.fields.map(s=>e.jsxs("div",{children:[e.jsx(p,{htmlFor:s.key,children:s.label}),e.jsx(j,{id:s.key,type:s.type,placeholder:s.label,value:a.credentials[s.key]||"",onChange:n=>m({...a,credentials:{...a.credentials,[s.key]:n.target.value}}),className:"bg-slate-700 border-slate-600 text-white"})]},s.key))]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx(d,{onClick:E,className:"flex-1 bg-purple-600 hover:bg-purple-700",children:"Connect Account"}),e.jsx(d,{variant:"outline",onClick:()=>g(!1),children:"Cancel"})]})]})]})]})]}),e.jsx("div",{className:"grid gap-6",children:N.length===0?e.jsx(S,{className:"bg-slate-800/50 border-slate-700",children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx(F,{className:"w-12 h-12 mx-auto mb-4 text-slate-400"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Accounts Connected"}),e.jsx("p",{className:"text-slate-400",children:"Connect your social media accounts to start automated posting"})]})}):N.map(s=>{var t;const n=((t=x[s.platform])==null?void 0:t.icon)||F,i=x[s.platform];return e.jsx(S,{className:`bg-slate-800/50 ${(i==null?void 0:i.bgColor)||"border-slate-700"}`,children:e.jsxs(T,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-slate-700/50",children:e.jsx(n,{className:`w-6 h-6 ${(i==null?void 0:i.color)||"text-slate-400"}`})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-white",children:s.displayName}),e.jsxs("p",{className:"text-slate-400",children:[s.username," â€¢ ",s.platform]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(X,{variant:s.isConnected?"default":"secondary",className:s.isConnected?"bg-green-600":"bg-red-600",children:s.isConnected?e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"w-3 h-3 mr-1"}),"Connected"]}):e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Disconnected"]})})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.followers.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-400",children:"Followers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.following.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-400",children:"Following"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.posts.toLocaleString()}),e.jsx("p",{className:"text-sm text-slate-400",children:"Posts"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("h5",{className:"font-semibold text-white",children:"API Credentials"}),e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>B(s.id),children:w[s.id]?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(se,{className:"w-4 h-4"})})]}),w[s.id]?e.jsx("div",{className:"space-y-2 bg-slate-900/50 p-4 rounded-lg",children:Object.entries(s.apiCredentials).map(([l,b])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-sm text-slate-300 capitalize",children:[l.replace("_"," "),":"]}),e.jsx("code",{className:"text-xs text-purple-400 bg-slate-700 px-2 py-1 rounded",children:b})]},l))}):e.jsx("p",{className:"text-sm text-slate-400 bg-slate-900/50 p-4 rounded-lg",children:"API credentials are securely stored and hidden. Click the eye icon to view."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{onClick:()=>L(s.id),disabled:y===s.id,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),y===s.id?"Testing...":"Test Connection"]}),e.jsxs(d,{variant:"outline",onClick:()=>O(s.id),className:"border-red-500 text-red-400 hover:bg-red-950",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),"Remove"]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-slate-700",children:e.jsxs("p",{className:"text-xs text-slate-500",children:["Last synchronized: ",new Date(s.lastSync).toLocaleString()]})})]})},s.id)})})]})})}export{ce as default};
