import{r as f,aT as L,c as N,d as G,j as e,$ as i,C as n,e as l,f as d,a1 as b,g as c,a as o,h as m,B as j,aG as D,I as q,az as A,aC as P,aK as W,aA as I,aX as a,am as X}from"./index-CeACcdR0.js";function M(){const[x,u]=f.useState(""),[t,p]=f.useState(""),g=L(),{data:v=[],isLoading:C}=N({queryKey:["/api/codes/free-flutterbye"]}),{data:y=[],isLoading:F}=N({queryKey:["/api/codes/redemptions",t],enabled:!!t}),h=G({mutationFn:async({code:s,userId:r})=>await X("/api/codes/redeem","POST",{code:s,userId:r,codeType:"free_flutterbye"}),onSuccess:s=>{a({title:"Free Flutterbye Claimed!",description:`Successfully claimed your Free Flutterbye mint: ${s.tokenId}`}),g.invalidateQueries({queryKey:["/api/codes/free-flutterbye"]}),g.invalidateQueries({queryKey:["/api/codes/redemptions",t]}),u("")},onError:s=>{a({title:"Redemption Failed",description:s.message||"Failed to redeem code. Please check if the code is valid and not expired.",variant:"destructive"})}}),w=async()=>{const s="user-"+Math.random().toString(36).substr(2,9);p(s),a({title:"Wallet Connected",description:"Ready to claim Free Flutterbye mints!"})},k=()=>{if(!x.trim()){a({title:"Invalid Code",description:"Please enter a valid redemption code.",variant:"destructive"});return}if(!t){a({title:"Wallet Required",description:"Please connect your wallet first.",variant:"destructive"});return}h.mutate({code:x.trim().toUpperCase(),userId:t})},S=()=>{const s="GREEN-"+Math.random().toString(36).substr(2,6).toUpperCase();u(s),a({title:"Sample Code Generated",description:"This is a sample code for demonstration purposes."})},R=s=>s?new Date(s)<new Date:!1,U=s=>s.currentUses>=s.maxUses,E=s=>s.isActive?R(s.expiresAt)?{label:"Expired",variant:"destructive"}:U(s)?{label:"Fully Used",variant:"destructive"}:{label:"Active",variant:"default"}:{label:"Inactive",variant:"secondary"};return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"flex items-center justify-center mb-4",children:[e.jsx(i,{className:"w-8 h-8 mr-3 text-green-500"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent",children:"Free Flutterbye Codes"})]}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Claim free Flutterbye mints with special redemption codes"})]}),e.jsxs(n,{className:"mb-8",children:[e.jsxs(l,{children:[e.jsxs(d,{className:"flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2"}),"Wallet Connection"]}),e.jsx(c,{children:"Connect your wallet to claim free Flutterbye mints"})]}),e.jsx(o,{children:t?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(j,{variant:"outline",className:"text-sm",children:["Connected: ",t]}),e.jsx(m,{variant:"outline",onClick:()=>p(""),size:"sm",children:"Disconnect"})]}):e.jsx(m,{onClick:w,size:"lg",className:"w-full sm:w-auto",children:"Connect Wallet"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsxs(d,{className:"flex items-center",children:[e.jsx(b,{className:"w-5 h-5 mr-2 text-green-500"}),"Redeem Code"]}),e.jsx(c,{children:"Enter your Free Flutterbye redemption code to claim your mint"})]}),e.jsxs(o,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(D,{htmlFor:"redemption-code",children:"Redemption Code"}),e.jsx(q,{id:"redemption-code",value:x,onChange:s=>u(s.target.value.toUpperCase()),placeholder:"FREE-XXXXXX",className:"font-mono text-center text-lg"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(m,{onClick:k,disabled:h.isPending||!t,className:"w-full",size:"lg",children:h.isPending?e.jsxs(e.Fragment,{children:[e.jsx(A,{className:"w-4 h-4 mr-2 animate-spin"}),"Claiming..."]}):e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-4 h-4 mr-2"}),"Claim Free Flutterbye"]})}),e.jsx(m,{onClick:S,variant:"outline",size:"sm",className:"w-full",children:"Generate Sample Code (Demo)"})]}),e.jsx("div",{className:"bg-green-50 dark:bg-green-950/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(i,{className:"w-5 h-5 text-green-500 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-blue-700 dark:text-blue-300",children:"Free Flutterbye Benefits:"}),e.jsxs("ul",{className:"text-green-600 dark:text-green-400 mt-1 space-y-1",children:[e.jsx("li",{children:"• Exclusive special edition FLBY-MSG token"}),e.jsx("li",{children:"• Unique green-themed design and metadata"}),e.jsx("li",{children:"• Limited availability through codes only"}),e.jsx("li",{children:"• May include bonus value attachment"})]})]})]})})]})]}),e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsx(d,{children:"Available Green Codes"}),e.jsx(c,{children:"Current active redemption codes (Demo view)"})]}),e.jsx(o,{children:C?e.jsx("div",{className:"text-center py-4",children:"Loading codes..."}):v.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(P,{className:"w-8 h-8 mx-auto mb-2"}),"No active codes available"]}):e.jsx("div",{className:"space-y-3",children:v.slice(0,5).map(s=>{const r=E(s);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-mono font-medium",children:s.code}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Uses: ",s.currentUses,"/",s.maxUses,s.expiresAt&&e.jsxs("span",{className:"ml-2",children:["• Expires: ",new Date(s.expiresAt).toLocaleDateString()]})]})]}),e.jsx(j,{variant:r.variant,children:r.label})]},s.id)})})})]})]}),t&&e.jsxs(e.Fragment,{children:[e.jsx(W,{className:"my-8"}),e.jsxs(n,{children:[e.jsxs(l,{children:[e.jsxs(d,{className:"flex items-center",children:[e.jsx(I,{className:"w-5 h-5 mr-2 text-green-500"}),"Your Redemptions"]}),e.jsx(c,{children:"Green Flutterbye mints you've claimed"})]}),e.jsx(o,{children:F?e.jsx("div",{className:"text-center py-4",children:"Loading redemptions..."}):y.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No redemptions yet. Use a code above to claim your first Green Flutterbye!"}):e.jsx("div",{className:"space-y-3",children:y.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium",children:["Token: ",s.tokenId||"Processing..."]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Claimed: ",new Date(s.redeemedAt).toLocaleString()]})]}),e.jsxs(j,{variant:"default",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[e.jsx(i,{className:"w-3 h-3 mr-1"}),"Green Flutterbye"]})]},s.id))})})]})]})]})})}export{M as default};
