import{r as i,b as M,j as e,T as O,i as H,k as u,aM as R,aW as x,n as b,C as o,e as N,f,aZ as W,g as $,a as d,aH as U,I as v,h,ae as y,B as g,az as _,bv as A}from"./index-CeACcdR0.js";import{P as w}from"./pen-line-hXb-wkd2.js";function Z(){const[m,T]=i.useState([]),[C,S]=i.useState([]),[a,r]=i.useState({content:"",hashtags:"",scheduledTime:""}),[p,j]=i.useState(!1),{toast:c}=M();i.useEffect(()=>{n(),P()},[]);const n=async()=>{try{const t=await fetch("/api/social-automation/scheduled-posts");if(t.ok){const s=await t.json();T(s.posts)}}catch(t){console.error("Failed to fetch scheduled posts:",t)}},P=async()=>{try{const t=await fetch("/api/social-automation/content-templates");if(t.ok){const s=await t.json();S(s.templates)}}catch(t){console.error("Failed to fetch content templates:",t)}},k=async()=>{if(!a.content||!a.scheduledTime){c({title:"Missing Information",description:"Please provide content and scheduled time",variant:"destructive"});return}j(!0);try{const t=a.hashtags.split(",").map(l=>l.trim()).filter(l=>l),s=await fetch("/api/social-automation/schedule-post",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({content:a.content,hashtags:t,scheduledTime:a.scheduledTime})});if(s.ok){const l=await s.json();c({title:"Post Scheduled Successfully!",description:`Post ID: ${l.postId}`,className:"bg-green-900 border-green-500 text-white"}),r({content:"",hashtags:"",scheduledTime:""}),n()}else{const l=await s.json();c({title:"Scheduling Failed",description:l.message,variant:"destructive"})}}catch{c({title:"Error",description:"Failed to schedule post",variant:"destructive"})}finally{j(!1)}},F=async t=>{try{const s=await fetch(`/api/social-automation/scheduled-posts/${t}`,{method:"DELETE"});if(s.ok)c({title:"Post Cancelled",description:"Scheduled post has been cancelled",className:"bg-yellow-900 border-yellow-500 text-white"}),n();else{const l=await s.json();c({title:"Cancellation Failed",description:l.message,variant:"destructive"})}}catch{c({title:"Error",description:"Failed to cancel post",variant:"destructive"})}},D=t=>{r({content:t.text,hashtags:t.hashtags.join(", "),scheduledTime:""})},E=t=>{switch(t){case"pending":return"bg-yellow-500";case"posted":return"bg-green-500";case"failed":return"bg-red-500";default:return"bg-gray-500"}},z=t=>new Date(t).toLocaleString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}),B=()=>{const t=new Date;return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t.toISOString().slice(0,16)};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 text-white",children:[e.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 border-2 border-electric-blue/30 animate-pulse"}),e.jsx("div",{className:"absolute top-2 left-2 right-2 bottom-2 border border-electric-green/20 animate-pulse",style:{animationDelay:"0.5s"}})]}),e.jsx("div",{className:"relative z-10 p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-electric-blue to-electric-green bg-clip-text text-transparent mb-4",children:"FlutterBye Social Content Scheduler"}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Automate your @flutterbye_io content strategy with intelligent scheduling"})]}),e.jsxs(O,{defaultValue:"schedule",className:"space-y-6",children:[e.jsxs(H,{className:"grid w-full grid-cols-3 bg-slate-800/50 border border-electric-blue/20",children:[e.jsxs(u,{value:"schedule",className:"data-[state=active]:bg-electric-blue/20 data-[state=active]:text-electric-blue",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Schedule Post"]}),e.jsxs(u,{value:"scheduled",className:"data-[state=active]:bg-electric-blue/20 data-[state=active]:text-electric-blue",children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Scheduled Posts (",m.filter(t=>t.status==="pending").length,")"]}),e.jsxs(u,{value:"templates",className:"data-[state=active]:bg-electric-blue/20 data-[state=active]:text-electric-blue",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Content Templates"]})]}),e.jsx(b,{value:"schedule",className:"space-y-6",children:e.jsxs(o,{className:"bg-slate-800/50 border-electric-blue/20 backdrop-blur-sm",children:[e.jsxs(N,{children:[e.jsxs(f,{className:"text-electric-blue flex items-center",children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Schedule New Post"]}),e.jsx($,{children:"Create and schedule content for your @flutterbye_io Twitter account"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Content"}),e.jsx(U,{value:a.content,onChange:t=>r({...a,content:t.target.value}),placeholder:"What's happening at FlutterBye?",className:"bg-slate-700/50 border-gray-600 text-white placeholder-gray-400 min-h-[100px]",maxLength:280}),e.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:[a.content.length,"/280 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Hashtags (comma-separated)"}),e.jsx(v,{value:a.hashtags,onChange:t=>r({...a,hashtags:t.target.value}),placeholder:"#FlutterBye, #Web3, #Communication",className:"bg-slate-700/50 border-gray-600 text-white placeholder-gray-400"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scheduled Time"}),e.jsx(v,{type:"datetime-local",value:a.scheduledTime,onChange:t=>r({...a,scheduledTime:t.target.value}),min:B(),className:"bg-slate-700/50 border-gray-600 text-white"})]}),e.jsx(h,{onClick:k,disabled:p||!a.content||!a.scheduledTime,className:"w-full bg-gradient-to-r from-electric-blue to-electric-green hover:from-electric-blue/80 hover:to-electric-green/80",children:p?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"w-4 h-4 mr-2 animate-spin"}),"Scheduling..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Schedule Post"]})})]})]})}),e.jsxs(b,{value:"scheduled",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-electric-blue",children:"Scheduled Posts"}),e.jsxs(h,{onClick:n,variant:"outline",size:"sm",className:"border-electric-blue/30 text-electric-blue hover:bg-electric-blue/10",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),m.length===0?e.jsx(o,{className:"bg-slate-800/50 border-electric-blue/20 backdrop-blur-sm",children:e.jsxs(d,{className:"py-8 text-center",children:[e.jsx(x,{className:"w-12 h-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-400",children:"No scheduled posts yet"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Schedule your first post to see it here"})]})}):e.jsx("div",{className:"grid gap-4",children:m.map(t=>e.jsx(o,{className:"bg-slate-800/50 border-electric-blue/20 backdrop-blur-sm",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx(g,{className:`${E(t.status)} text-white capitalize`,children:t.status}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400",children:[e.jsx(_,{className:"w-4 h-4 mr-1"}),z(t.scheduledTime)]})]}),e.jsx("p",{className:"text-white mb-2",children:t.content}),t.hashtags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:t.hashtags.map((s,l)=>e.jsx(g,{variant:"secondary",className:"bg-slate-700 text-gray-300",children:s},l))}),t.status==="pending"&&e.jsxs(h,{onClick:()=>F(t.id),variant:"outline",size:"sm",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),"Cancel"]})]})},t.id))})]}),e.jsxs(b,{value:"templates",className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-electric-blue",children:"Content Templates"}),C.map(t=>e.jsxs(o,{className:"bg-slate-800/50 border-electric-blue/20 backdrop-blur-sm",children:[e.jsx(N,{children:e.jsx(f,{className:"text-electric-green",children:t.category})}),e.jsx(d,{className:"space-y-4",children:t.templates.map((s,l)=>e.jsxs("div",{className:"p-4 bg-slate-700/30 rounded-lg border border-gray-600",children:[e.jsx("p",{className:"text-white mb-2",children:s.text}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:s.hashtags.map((I,L)=>e.jsx(g,{variant:"secondary",className:"bg-slate-600 text-gray-300",children:I},L))}),e.jsxs(h,{onClick:()=>D(s),variant:"outline",size:"sm",className:"border-electric-blue/30 text-electric-blue hover:bg-electric-blue/10",children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Use Template"]})]},l))})]},t.category))]})]})]})})]})}export{Z as default};
