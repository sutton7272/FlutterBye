import{a3 as Q,r as Y,b as V,aT as W,c as d,d as T,j as e,C as r,a as l,h as P,l as B,m as M,ab as q,D as G,M as R,a1 as O,T as X,i as J,k as x,n as m,e as g,f as u,g as j,a7 as F,B as Z,b3 as _,b4 as ee,b5 as D,b6 as o,b7 as se,b8 as h,aU as ae,U as te,X as re,Y as le,o as ie}from"./index-CeACcdR0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Q("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);function xe(){var S;const[t,ce]=Y.useState("user-1"),{toast:f}=V(),p=W(),{data:i,isLoading:K}=d({queryKey:["/api/rewards/user",t],enabled:!!t}),{data:v=[],isLoading:de}=d({queryKey:["/api/rewards/user",t,"badges"],enabled:!!t}),{data:k=[],isLoading:oe}=d({queryKey:["/api/rewards/user",t,"transactions"],enabled:!!t}),{data:z=[]}=d({queryKey:["/api/rewards/leaderboard"]}),{data:C=[]}=d({queryKey:["/api/rewards/challenges"]}),{data:E=[]}=d({queryKey:["/api/rewards/user",t,"challenges"],enabled:!!t}),b=T({mutationFn:async s=>{const a=await fetch(`/api/rewards/initialize/${s}`,{method:"POST"});if(!a.ok)throw new Error("Failed to initialize rewards");return a.json()},onSuccess:()=>{f({title:"Welcome to Flutterbye Rewards!",description:"Your rewards profile has been created!"}),p.invalidateQueries({queryKey:["/api/rewards/user",t]})}}),w=T({mutationFn:async s=>{const a=await fetch(`/api/rewards/user/${s}/login`,{method:"POST"});if(!a.ok)throw new Error("Failed to process daily login");return a.json()},onSuccess:()=>{f({title:"Daily Login Bonus!",description:"You earned points for logging in today!"}),p.invalidateQueries({queryKey:["/api/rewards/user",t]}),p.invalidateQueries({queryKey:["/api/rewards/user",t,"transactions"]})}}),I=(s,a)=>{const n=[0,100,250,500,1e3,2e3,3500,5500,8e3,12e3,17e3,25e3,35e3,5e4,75e3],c=n[a-1]||0,N=n[a]||n[n.length-1],y=(s-c)/(N-c)*100;return Math.min(Math.max(y,0),100)},$=s=>{switch(s.toLowerCase()){case"legendary":return"from-yellow-400 to-orange-500";case"epic":return"from-purple-500 to-pink-500";case"rare":return"from-blue-500 to-cyan-500";default:return"from-gray-400 to-gray-600"}},A=s=>{switch(s.toLowerCase()){case"legendary":return e.jsx(re,{className:"h-4 w-4"});case"epic":return e.jsx(ne,{className:"h-4 w-4"});case"rare":return e.jsx(te,{className:"h-4 w-4"});default:return e.jsx(ae,{className:"h-4 w-4"})}},U=s=>{switch(s.toLowerCase()){case"sms":return e.jsx(R,{className:"h-5 w-5"});case"trading":return e.jsx(ie,{className:"h-5 w-5"});case"social":return e.jsx(le,{className:"h-5 w-5"});case"milestone":return e.jsx(F,{className:"h-5 w-5"});default:return e.jsx(M,{className:"h-5 w-5"})}},H=s=>`${s.slice(0,6)}...${s.slice(-4)}`,L=s=>new Date(s).toLocaleDateString();return e.jsx("div",{className:"min-h-screen p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Flutterbye Rewards"}),e.jsx("p",{className:"text-xl text-purple-200",children:"Earn points, unlock badges, and climb the leaderboard through SMS engagement"})]}),!i&&!K&&e.jsx(r,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:e.jsxs(l,{className:"py-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Welcome to Flutterbye Rewards!"}),e.jsx("p",{className:"text-purple-200 mb-6",children:"Start earning points by sending SMS messages, minting tokens, and engaging with the platform."}),e.jsx(P,{onClick:()=>b.mutate(t),disabled:b.isPending,size:"lg",className:"bg-purple-600 hover:bg-purple-700",children:b.isPending?"Initializing...":"Start Earning Rewards"})]})}),i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid md:grid-cols-4 gap-6",children:[e.jsx(r,{className:"bg-gradient-to-br from-yellow-500/20 to-orange-500/20 backdrop-blur-sm border-white/20",children:e.jsx(l,{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-yellow-200",children:"Total Points"}),e.jsx("p",{className:"text-3xl font-bold text-yellow-100",children:(S=i.totalPoints)==null?void 0:S.toLocaleString()})]}),e.jsx(B,{className:"h-8 w-8 text-yellow-300"})]})})}),e.jsx(r,{className:"bg-gradient-to-br from-purple-500/20 to-pink-500/20 backdrop-blur-sm border-white/20",children:e.jsxs(l,{className:"py-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-200",children:"Level"}),e.jsx("p",{className:"text-3xl font-bold text-purple-100",children:i.currentLevel})]}),e.jsx(M,{className:"h-8 w-8 text-purple-300"})]}),e.jsx("div",{className:"mt-4",children:e.jsx(q,{value:I(i.totalPoints,i.currentLevel),className:"h-2"})})]})}),e.jsx(r,{className:"bg-gradient-to-br from-orange-500/20 to-red-500/20 backdrop-blur-sm border-white/20",children:e.jsx(l,{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-200",children:"Current Streak"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-100",children:[i.currentStreak," days"]})]}),e.jsx(G,{className:"h-8 w-8 text-orange-300"})]})})}),e.jsx(r,{className:"bg-gradient-to-br from-green-500/20 to-emerald-500/20 backdrop-blur-sm border-white/20",children:e.jsx(l,{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-200",children:"SMS Messages"}),e.jsx("p",{className:"text-3xl font-bold text-green-100",children:i.totalSmsMessages})]}),e.jsx(R,{className:"h-8 w-8 text-green-300"})]})})})]}),e.jsx(r,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:e.jsx(l,{className:"py-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Daily Login Bonus"}),e.jsx("p",{className:"text-gray-300",children:"Earn 5 points for logging in each day and maintain your streak!"})]}),e.jsxs(P,{onClick:()=>w.mutate(t),disabled:w.isPending,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),w.isPending?"Processing...":"Claim Daily Bonus"]})]})})}),e.jsxs(X,{defaultValue:"badges",className:"w-full",children:[e.jsxs(J,{className:"grid w-full grid-cols-4",children:[e.jsx(x,{value:"badges",children:"Badges"}),e.jsx(x,{value:"challenges",children:"Daily Challenges"}),e.jsx(x,{value:"leaderboard",children:"Leaderboard"}),e.jsx(x,{value:"history",children:"Transaction History"})]}),e.jsx(m,{value:"badges",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[e.jsxs(g,{children:[e.jsx(u,{className:"text-white",children:"Your Badges"}),e.jsx(j,{className:"text-purple-200",children:"Collect badges by completing various activities on Flutterbye"})]}),e.jsx(l,{children:v.length===0?e.jsx("div",{className:"text-center py-8 text-purple-200",children:"No badges earned yet. Keep engaging to unlock your first badge!"}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map(s=>e.jsx(r,{className:`bg-gradient-to-br ${$(s.badge.rarity)} backdrop-blur-sm border-white/20`,children:e.jsxs(l,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[U(s.badge.category),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-white",children:s.badge.name}),e.jsxs("div",{className:"flex items-center gap-1",children:[A(s.badge.rarity),e.jsx("span",{className:"text-sm text-white/80 capitalize",children:s.badge.rarity})]})]})]}),e.jsx("p",{className:"text-sm text-white/90 mb-2",children:s.badge.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-white/80",children:["+",s.badge.pointsReward," points"]}),e.jsxs("span",{className:"text-white/80",children:["Earned ",L(s.earnedAt)]})]})]})},s.id))})})]})}),e.jsx(m,{value:"challenges",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[e.jsxs(g,{children:[e.jsx(u,{className:"text-white",children:"Daily Challenges"}),e.jsx(j,{className:"text-purple-200",children:"Complete daily tasks to earn bonus points"})]}),e.jsx(l,{children:C.length===0?e.jsx("div",{className:"text-center py-8 text-purple-200",children:"No active challenges today. Check back tomorrow for new challenges!"}):e.jsx("div",{className:"space-y-4",children:C.map(s=>{const a=E.find(y=>y.challengeId===s.id),n=(a==null?void 0:a.currentProgress)||0,c=(a==null?void 0:a.isCompleted)||!1,N=Math.min(n/s.targetValue*100,100);return e.jsx(r,{className:"bg-white/5 border-white/10",children:e.jsxs(l,{className:"py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(F,{className:"h-5 w-5 text-blue-300"}),e.jsx("h3",{className:"font-semibold text-white",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{variant:c?"default":"secondary",className:c?"bg-green-600":"bg-gray-600",children:c?"Completed":"In Progress"}),e.jsxs("span",{className:"text-sm text-yellow-300",children:["+",s.pointsReward," pts"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-300",children:"Progress"}),e.jsxs("span",{className:"text-white",children:[n," / ",s.targetValue]})]}),e.jsx(q,{value:N,className:"h-3"})]})]})},s.id)})})})]})}),e.jsx(m,{value:"leaderboard",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[e.jsxs(g,{children:[e.jsx(u,{className:"text-white",children:"Global Leaderboard"}),e.jsx(j,{className:"text-purple-200",children:"See how you rank against other Flutterbye users"})]}),e.jsx(l,{children:e.jsxs(_,{children:[e.jsx(ee,{children:e.jsxs(D,{children:[e.jsx(o,{className:"text-white",children:"Rank"}),e.jsx(o,{className:"text-white",children:"User"}),e.jsx(o,{className:"text-white",children:"Level"}),e.jsx(o,{className:"text-white",children:"Points"}),e.jsx(o,{className:"text-white",children:"Streak"})]})}),e.jsx(se,{children:z.slice(0,10).map((s,a)=>e.jsxs(D,{children:[e.jsx(h,{className:"text-white font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[a<3&&e.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${a===0?"bg-yellow-500":a===1?"bg-gray-400":"bg-orange-600"}`,children:a+1}),a>=3&&e.jsx("span",{children:a+1})]})}),e.jsx(h,{className:"text-white font-mono",children:H(s.user.walletAddress)}),e.jsx(h,{className:"text-purple-300",children:s.currentLevel}),e.jsx(h,{className:"text-yellow-300",children:s.totalPoints.toLocaleString()}),e.jsxs(h,{className:"text-orange-300",children:[s.currentStreak," days"]})]},s.id))})]})})]})}),e.jsx(m,{value:"history",children:e.jsxs(r,{className:"bg-white/10 backdrop-blur-sm border-white/20",children:[e.jsxs(g,{children:[e.jsx(u,{className:"text-white",children:"Recent Activity"}),e.jsx(j,{className:"text-purple-200",children:"Your recent point transactions and achievements"})]}),e.jsx(l,{children:k.length===0?e.jsx("div",{className:"text-center py-8 text-purple-200",children:"No transaction history yet. Start earning points to see your activity here!"}):e.jsx("div",{className:"space-y-3",children:k.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${s.pointsChange>0?"bg-green-600":"bg-red-600"}`,children:s.pointsChange>0?"+":"-"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.description}),e.jsx("p",{className:"text-xs text-gray-400",children:L(s.createdAt)})]})]}),e.jsxs("div",{className:`font-bold ${s.pointsChange>0?"text-green-300":"text-red-300"}`,children:[s.pointsChange>0?"+":"",s.pointsChange," pts"]})]},s.id))})})]})})]})]})]})})}export{xe as RewardsPage};
