import{r as N,b as D,aT as E,c as b,d as L,j as e,a$ as F,C as m,e as x,f as h,y as R,g as v,a as g,h as r,E as A,B as y,bY as w,aC as B,bZ as k,aB as G,aG as C,I as q,b9 as K,aK as O,aA as _}from"./index-CeACcdR0.js";import{R as z}from"./rotate-ccw-GY-61wQi.js";import{I as Q}from"./info-B0XnHp0D.js";function Y(){var f;const[t,u]=N.useState(""),[I,p]=N.useState(!1),{toast:n}=D(),j=E(),{data:c,isLoading:S}=b({queryKey:["/api/default-token-image"]}),{data:d,isLoading:H}=b({queryKey:["/api/admin/system-settings"]}),l=L({mutationFn:async s=>{const o=await fetch("/api/admin/default-token-image",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({imageUrl:s})});if(!o.ok){const T=await o.json();throw new Error(T.message||"Failed to update image")}return o.json()},onSuccess:()=>{n({title:"Success",description:"Default token image updated successfully"}),j.invalidateQueries({queryKey:["/api/default-token-image"]}),j.invalidateQueries({queryKey:["/api/admin/system-settings"]}),u("")},onError:s=>{n({title:"Error",description:s.message||"Failed to update default token image",variant:"destructive"})}}),P=()=>{l.mutate("/assets/image_1754114527645.png")},U=s=>{if(s.preventDefault(),!t.trim()){n({title:"Error",description:"Please enter an image URL",variant:"destructive"});return}l.mutate(t.trim())},a=(c==null?void 0:c.defaultImage)||"",i=(f=d==null?void 0:d.settings)==null?void 0:f.find(s=>s.key==="default_token_image");return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-2",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white flex items-center justify-center gap-2",children:[e.jsx(F,{className:"h-8 w-8 text-cyan-400"}),"Default Token Image Management"]}),e.jsx("p",{className:"text-slate-300",children:"Configure the default image used for all tokens without custom uploads"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(m,{className:"bg-slate-800/50 border-cyan-500/30",children:[e.jsxs(x,{children:[e.jsxs(h,{className:"text-white flex items-center gap-2",children:[e.jsx(R,{className:"h-5 w-5 text-cyan-400"}),"Current Default Image"]}),e.jsx(v,{className:"text-slate-400",children:"Currently active default token image"})]}),e.jsxs(g,{className:"space-y-4",children:[S?e.jsx("div",{className:"flex items-center justify-center h-32 bg-slate-700/50 rounded-lg",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-cyan-400"})}):a?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:a,alt:"Current default token image",className:"w-full h-32 object-cover rounded-lg border border-slate-600",onError:s=>{s.target.src="/api/placeholder/150/150"}}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsxs(r,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"text-white border-white/30 hover:bg-white/10",children:[e.jsx(A,{className:"h-4 w-4 mr-1"}),"Preview"]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{variant:"outline",className:"text-cyan-400 border-cyan-400/30",children:"Active"}),e.jsx(y,{variant:"secondary",className:"text-slate-300",children:a.includes("image_1754114527645")?"Butterfly Logo":"Custom Image"})]}),e.jsx("p",{className:"text-sm text-slate-400 break-all",children:a})]})]}):e.jsxs(w,{children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx(k,{children:"No default image configured"})]}),i&&e.jsxs("div",{className:"mt-4 p-3 bg-slate-700/30 rounded-lg border border-slate-600/30",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"System Setting Details"}),e.jsxs("div",{className:"space-y-1 text-xs text-slate-400",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"ID:"})," ",i.id]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Category:"})," ",i.category]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Type:"})," ",i.dataType]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-300",children:"Updated:"})," ",new Date(i.updatedAt).toLocaleString()]})]})]})]})]}),e.jsxs(m,{className:"bg-slate-800/50 border-green-500/30",children:[e.jsxs(x,{children:[e.jsxs(h,{className:"text-white flex items-center gap-2",children:[e.jsx(G,{className:"h-5 w-5 text-green-400"}),"Update Default Image"]}),e.jsx(v,{className:"text-slate-400",children:"Change the default image for all new tokens"})]}),e.jsx(g,{children:e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"imageUrl",className:"text-white",children:"Image URL"}),e.jsx(q,{id:"imageUrl",type:"url",value:t,onChange:s=>u(s.target.value),placeholder:"https://example.com/image.png or /assets/image.png",className:"bg-slate-700/50 border-slate-600 text-white placeholder:text-slate-400",disabled:l.isPending})]}),t&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{className:"text-white",children:"Preview"}),e.jsx("img",{src:t,alt:"Preview",className:"w-full h-24 object-cover rounded border border-slate-600",onError:s=>{s.target.src="/api/placeholder/100/100"}})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(r,{type:"submit",disabled:l.isPending||!t.trim(),className:"flex-1 bg-green-600 hover:bg-green-700 text-white",children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Update Image"]})}),e.jsxs(r,{type:"button",variant:"outline",onClick:P,disabled:l.isPending,className:"border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Reset to Original"]})]})]})})]})]}),e.jsxs(m,{className:"bg-slate-800/50 border-blue-500/30",children:[e.jsx(x,{children:e.jsxs(h,{className:"text-white flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5 text-blue-400"}),"Usage Information"]})}),e.jsxs(g,{className:"space-y-4 text-slate-300",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"How it works"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsx("li",{children:"• Default image applies to all tokens without custom uploads"}),e.jsx("li",{children:"• Changes take effect immediately for new tokens"}),e.jsx("li",{children:"• Existing tokens keep their current images"}),e.jsx("li",{children:"• Supports both external URLs and local asset paths"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Supported formats"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsx("li",{children:"• HTTPS URLs: https://example.com/image.png"}),e.jsx("li",{children:"• Asset paths: /assets/image.png"}),e.jsx("li",{children:"• File types: PNG, JPG, JPEG, GIF, SVG"}),e.jsx("li",{children:"• Recommended size: 400x400px or larger"})]})]})]}),e.jsx(O,{className:"bg-slate-600"}),e.jsxs(w,{children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx(k,{className:"text-slate-300",children:"The original Flutterbye butterfly logo is available at: /assets/image_1754114527645.png"})]})]})]}),I&&a&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-slate-800 rounded-lg max-w-2xl w-full max-h-[80vh] overflow-auto",children:[e.jsx("div",{className:"p-4 border-b border-slate-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Default Token Image Preview"}),e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>p(!1),className:"text-slate-400 hover:text-white",children:"✕"})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("img",{src:a,alt:"Default token image preview",className:"w-full h-auto rounded border border-slate-600"}),e.jsx("p",{className:"mt-2 text-sm text-slate-400 break-all",children:a})]})]})})]})})}export{Y as default};
