import{a3 as re,r as x,b as X,j as e,C as u,e as P,f as M,aU as D,a as g,T as O,i as $,k as y,n as S,aG as C,I as m,aH as te,s as E,t as R,v as U,w as Y,x as z,B as G,h as i,l as A,an as _,as as le,bk as oe,ar as V,at as ne,au as ie,av as ce,aP as de,aw as he,U as me,Y as xe,X as ue,Z as ge,D as pe,a6 as je,c as fe,aM as L}from"./index-CeACcdR0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=re("Diamond",[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]]),ve={star:me,heart:xe,award:D,crown:ue,diamond:Ce,zap:ge,flame:pe,shield:je,coins:A},be={solid:"solid",gradient:"gradient",dots:"dots",stripes:"stripes",glow:"glow"},Ne=[{name:"Golden Achievement",category:"achievement",backgroundColor:"#fbbf24",textColor:"#1f2937",borderColor:"#f59e0b",icon:"crown",pattern:"gradient"},{name:"Diamond Elite",category:"social",backgroundColor:"#3b82f6",textColor:"#ffffff",borderColor:"#60a5fa",icon:"diamond",pattern:"glow"},{name:"Fire Starter",category:"custom",backgroundColor:"#dc2626",textColor:"#ffffff",borderColor:"#ef4444",icon:"flame",pattern:"solid"},{name:"Shield Guardian",category:"achievement",backgroundColor:"#059669",textColor:"#ffffff",borderColor:"#10b981",icon:"shield",pattern:"stripes"}];function we(){const[t,o]=x.useState({name:"My Custom Badge",description:"A unique badge I created",backgroundColor:"#8b5cf6",textColor:"#ffffff",borderColor:"#a78bfa",icon:"star",pattern:"solid"}),[N,w]=x.useState(!1),[k,T]=x.useState(!1),[v,r]=x.useState(""),[c,l]=x.useState(!1),p=x.useRef(null),{toast:b}=X();x.useEffect(()=>{const s=p.current;if(!s)return;const a=s.getContext("2d");a&&(s.width=300,s.height=300,a.clearRect(0,0,s.width,s.height),H(a,t),a.strokeStyle=t.borderColor,a.lineWidth=8,a.beginPath(),a.arc(150,150,140,0,2*Math.PI),a.stroke(),W(a,t),q(a,t))},[t]);const H=(s,a)=>{switch(a.pattern){case"gradient":const f=s.createRadialGradient(150,150,0,150,150,140);f.addColorStop(0,a.backgroundColor),f.addColorStop(1,B(a.backgroundColor,-30)),s.fillStyle=f;break;case"dots":s.fillStyle=a.backgroundColor,s.beginPath(),s.arc(150,150,140,0,2*Math.PI),s.fill(),s.fillStyle=B(a.backgroundColor,20);for(let d=0;d<20;d++){const se=150+Math.cos(d*.5)*98,ae=150+Math.sin(d*.5)*(140*.7);s.beginPath(),s.arc(se,ae,8,0,2*Math.PI),s.fill()}return;case"stripes":s.fillStyle=a.backgroundColor,s.beginPath(),s.arc(150,150,140,0,2*Math.PI),s.fill(),s.strokeStyle=B(a.backgroundColor,20),s.lineWidth=4;for(let d=-140;d<140;d+=20)s.beginPath(),s.moveTo(150+d,10),s.lineTo(150+d,290),s.stroke();return;case"glow":const h=s.createRadialGradient(150,150,0,150,150,140*1.2);h.addColorStop(0,a.backgroundColor),h.addColorStop(.7,B(a.backgroundColor,-20)),h.addColorStop(1,"transparent"),s.fillStyle=h;break;default:s.fillStyle=a.backgroundColor}s.beginPath(),s.arc(150,150,140,0,2*Math.PI),s.fill()},W=(s,a)=>{s.fillStyle=a.textColor,s.font="bold 40px sans-serif",s.textAlign="center",s.textBaseline="middle";const n={star:"★",heart:"♥",award:"🏆",crown:"♔",diamond:"♦",zap:"⚡",flame:"🔥",shield:"🛡",coins:"🏅"};s.fillText(n[a.icon]||"★",150,120)},q=(s,a)=>{s.fillStyle=a.textColor,s.font="bold 18px sans-serif",s.textAlign="center",s.textBaseline="middle";const n=a.name.split(" ");if(n.length<=2)s.fillText(a.name,150,200);else{const j=Math.ceil(n.length/2);s.fillText(n.slice(0,j).join(" "),150,190),s.fillText(n.slice(j).join(" "),150,210)}},B=(s,a)=>{const n=parseInt(s.replace("#",""),16),j=Math.round(2.55*a),F=(n>>16)+j,f=(n>>8&255)+j,h=(n&255)+j;return"#"+(16777216+(F<255?F<1?0:F:255)*65536+(f<255?f<1?0:f:255)*256+(h<255?h<1?0:h:255)).toString(16).slice(1)},I=async()=>{try{const s=await fetch("/api/badges/custom",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Failed to save badge");const a=await s.json();return b({title:"Badge Saved!",description:"Your custom badge has been saved to your collection."}),a}catch{b({title:"Error",description:"Failed to save badge. Please try again.",variant:"destructive"})}},Z=async()=>{T(!0);try{const s=await I();if(!s)return;const a=await fetch(`/api/badges/custom/${s.id}/mint`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to mint NFT");const n=await a.json();b({title:"NFT Minted!",description:`Your badge has been minted as an NFT: ${n.mintAddress}`})}catch{b({title:"Minting Failed",description:"Failed to mint badge as NFT. Please try again.",variant:"destructive"})}finally{T(!1)}},J=async()=>{const s=await I();if(!s)return;const a=`${window.location.origin}/badges/shared/${s.id}`;r(a),w(!0)},K=async()=>{try{await navigator.clipboard.writeText(v),l(!0),setTimeout(()=>l(!1),2e3),b({title:"Copied!",description:"Share URL copied to clipboard."})}catch{b({title:"Error",description:"Failed to copy URL to clipboard.",variant:"destructive"})}},Q=()=>{const s=p.current;if(!s)return;const a=document.createElement("a");a.download=`${t.name.replace(/\s+/g,"_")}_badge.png`,a.href=s.toDataURL(),a.click()},ee=s=>{o(a=>({...a,...s}))};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"space-y-6",children:e.jsxs(u,{children:[e.jsx(P,{children:e.jsxs(M,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-5 w-5"}),"Badge Designer"]})}),e.jsx(g,{children:e.jsxs(O,{defaultValue:"basic",className:"space-y-4",children:[e.jsxs($,{className:"grid w-full grid-cols-3",children:[e.jsx(y,{value:"basic",children:"Basic"}),e.jsx(y,{value:"style",children:"Style"}),e.jsx(y,{value:"templates",children:"Templates"})]}),e.jsxs(S,{value:"basic",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"name",children:"Badge Name"}),e.jsx(m,{id:"name",value:t.name,onChange:s=>o(a=>({...a,name:s.target.value})),maxLength:50})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"description",children:"Description"}),e.jsx(te,{id:"description",value:t.description,onChange:s=>o(a=>({...a,description:s.target.value})),maxLength:200,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"icon",children:"Icon"}),e.jsxs(E,{value:t.icon,onValueChange:s=>o(a=>({...a,icon:s})),children:[e.jsx(R,{children:e.jsx(U,{})}),e.jsx(Y,{children:Object.entries(ve).map(([s,a])=>e.jsx(z,{value:s,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(a,{className:"h-4 w-4"}),s.charAt(0).toUpperCase()+s.slice(1)]})},s))})]})]})]}),e.jsx(S,{value:"style",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"backgroundColor",children:"Background"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"color",id:"backgroundColor",value:t.backgroundColor,onChange:s=>o(a=>({...a,backgroundColor:s.target.value})),className:"w-16"}),e.jsx(m,{value:t.backgroundColor,onChange:s=>o(a=>({...a,backgroundColor:s.target.value})),placeholder:"#8b5cf6"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"textColor",children:"Text Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"color",id:"textColor",value:t.textColor,onChange:s=>o(a=>({...a,textColor:s.target.value})),className:"w-16"}),e.jsx(m,{value:t.textColor,onChange:s=>o(a=>({...a,textColor:s.target.value})),placeholder:"#ffffff"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"borderColor",children:"Border Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{type:"color",id:"borderColor",value:t.borderColor,onChange:s=>o(a=>({...a,borderColor:s.target.value})),className:"w-16"}),e.jsx(m,{value:t.borderColor,onChange:s=>o(a=>({...a,borderColor:s.target.value})),placeholder:"#a78bfa"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(C,{htmlFor:"pattern",children:"Pattern"}),e.jsxs(E,{value:t.pattern,onValueChange:s=>o(a=>({...a,pattern:s})),children:[e.jsx(R,{children:e.jsx(U,{})}),e.jsx(Y,{children:Object.entries(be).map(([s,a])=>e.jsx(z,{value:s,children:a.charAt(0).toUpperCase()+a.slice(1)},s))})]})]})]})}),e.jsx(S,{value:"templates",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Ne.map(s=>e.jsx(u,{className:"cursor-pointer hover:ring-2 hover:ring-primary",onClick:()=>ee(s),children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsx(G,{variant:"secondary",className:"text-xs",children:s.category})]}),e.jsx("div",{className:"w-8 h-8 rounded-full border-2",style:{backgroundColor:s.backgroundColor,borderColor:s.borderColor}})]})})},s.name))})})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(u,{children:[e.jsx(P,{children:e.jsx(M,{children:"Preview"})}),e.jsxs(g,{className:"flex flex-col items-center space-y-4",children:[e.jsx("canvas",{ref:p,className:"border rounded-lg max-w-full",style:{maxWidth:"300px",height:"auto"}}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("h3",{className:"font-bold text-lg",children:t.name}),e.jsx("p",{className:"text-muted-foreground text-sm",children:t.description})]})]})]}),e.jsxs(u,{children:[e.jsx(P,{children:e.jsx(M,{children:"Actions"})}),e.jsxs(g,{className:"space-y-3",children:[e.jsx(i,{onClick:I,className:"w-full",children:"Save Badge"}),e.jsxs(i,{onClick:Z,disabled:k,className:"w-full",variant:"outline",children:[k?"Minting...":"Mint as NFT",e.jsx(A,{className:"ml-2 h-4 w-4"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(i,{onClick:Q,variant:"outline",size:"sm",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Download"]}),e.jsxs(le,{open:N,onOpenChange:w,children:[e.jsx(oe,{asChild:!0,children:e.jsxs(i,{onClick:J,variant:"outline",size:"sm",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Share"]})}),e.jsxs(ne,{children:[e.jsx(ie,{children:e.jsx(ce,{children:"Share Your Badge"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(m,{value:v,readOnly:!0}),e.jsx(i,{onClick:K,variant:"outline",size:"sm",children:c?e.jsx(de,{className:"h-4 w-4"}):e.jsx(he,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>window.open(`https://twitter.com/intent/tweet?text=Check out my custom badge!&url=${encodeURIComponent(v)}`),children:"Twitter"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>window.open("https://discord.com/channels/@me"),children:"Discord"}),e.jsx(i,{variant:"outline",size:"sm",onClick:()=>window.open(`https://t.me/share/url?url=${encodeURIComponent(v)}`),children:"Telegram"})]})]})]})]})]})]})]})]})]})}function Se(){const[t,o]=x.useState("collection"),{toast:N}=X(),{data:w=[],isLoading:k}=fe({queryKey:["/api/badges/custom"],enabled:t==="collection"}),T=r=>{const c=document.createElement("canvas"),l=c.getContext("2d");if(!l)return;c.width=300,c.height=300,l.fillStyle=r.backgroundColor,l.beginPath(),l.arc(150,150,140,0,2*Math.PI),l.fill(),l.strokeStyle=r.borderColor,l.lineWidth=8,l.beginPath(),l.arc(150,150,140,0,2*Math.PI),l.stroke(),l.fillStyle=r.textColor,l.font="bold 18px sans-serif",l.textAlign="center",l.fillText(r.name,150,200);const p=document.createElement("a");p.download=`${r.name.replace(/\s+/g,"_")}_badge.png`,p.href=c.toDataURL(),p.click()},v=async r=>{if(r.shareableUrl)try{await navigator.clipboard.writeText(r.shareableUrl),N({title:"Copied!",description:"Badge share URL copied to clipboard."})}catch{N({title:"Error",description:"Failed to copy URL to clipboard.",variant:"destructive"})}};return e.jsx("div",{className:"min-h-screen pt-20",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-blue-400 bg-clip-text text-transparent mb-4",children:"Badge Studio"}),e.jsx("p",{className:"text-muted-foreground text-lg max-w-2xl mx-auto",children:"Create, customize, and mint your own NFT badges. Express your unique identity with personalized designs."})]}),e.jsxs(O,{value:t,onValueChange:o,className:"space-y-6",children:[e.jsxs($,{className:"grid w-full grid-cols-2 max-w-md mx-auto",children:[e.jsxs(y,{value:"collection",className:"flex items-center gap-2",children:[e.jsx(D,{className:"h-4 w-4"}),"My Collection"]}),e.jsxs(y,{value:"designer",className:"flex items-center gap-2",children:[e.jsx(L,{className:"h-4 w-4"}),"Create New"]})]}),e.jsx(S,{value:"collection",className:"space-y-6",children:k?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((r,c)=>e.jsx(u,{className:"animate-pulse",children:e.jsxs(g,{className:"p-6",children:[e.jsx("div",{className:"w-32 h-32 bg-muted rounded-full mx-auto mb-4"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mx-auto mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2 mx-auto mb-4"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx("div",{className:"h-8 bg-muted rounded w-16"}),e.jsx("div",{className:"h-8 bg-muted rounded w-16"})]})]})},c))}):w.length===0?e.jsx(u,{className:"text-center py-12",children:e.jsxs(g,{children:[e.jsx(D,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No badges yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Create your first custom badge to get started!"}),e.jsxs(i,{onClick:()=>o("designer"),children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Create Badge"]})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(r=>e.jsx(u,{className:"group hover:shadow-lg transition-shadow",children:e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsxs("div",{className:"w-32 h-32 rounded-full mx-auto flex items-center justify-center text-4xl font-bold",style:{backgroundColor:r.backgroundColor,color:r.textColor,border:`4px solid ${r.borderColor}`},children:[r.icon==="star"&&"★",r.icon==="heart"&&"♥",r.icon==="award"&&"🏆",r.icon==="crown"&&"♔",r.icon==="diamond"&&"♦",r.icon==="zap"&&"⚡",r.icon==="flame"&&"🔥",r.icon==="shield"&&"🛡",r.icon==="coins"&&"🏅"]}),r.isNFT&&e.jsx(G,{className:"absolute -top-2 -right-2 bg-gradient-to-r from-yellow-400 to-orange-500 text-black",children:"NFT"})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h3",{className:"font-bold text-lg mb-1",children:r.name}),e.jsx("p",{className:"text-muted-foreground text-sm line-clamp-2",children:r.description}),r.mintAddress&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2 font-mono",children:[r.mintAddress.slice(0,8),"...",r.mintAddress.slice(-8)]})]}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>T(r),children:e.jsx(_,{className:"h-4 w-4"})}),r.shareableUrl&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>v(r),children:e.jsx(V,{className:"h-4 w-4"})}),!r.isNFT&&e.jsx(i,{variant:"outline",size:"sm",onClick:()=>{N({title:"Coming Soon",description:"NFT minting will be available soon!"})},children:e.jsx(A,{className:"h-4 w-4"})})]})]})},r.id))})}),e.jsx(S,{value:"designer",children:e.jsxs(u,{children:[e.jsx(P,{children:e.jsx(M,{className:"text-center",children:"Create Your Custom Badge"})}),e.jsx(g,{children:e.jsx(we,{})})]})})]})]})})}export{Se as default};
