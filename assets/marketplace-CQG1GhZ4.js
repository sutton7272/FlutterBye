import{r as c,b as ae,c as F,d as T,j as e,T as le,i as re,k as S,Z as k,G as b,n as C,C as t,a as i,S as B,I as A,s as L,t as P,v as D,w as E,x as r,h as N,F as te,B as v,y as ie,V as ce,z as ne,D as I,H as O,J as R,K as V,N as q,O as K,P as M,Q,R as $,E as oe,U as de,X as me,am as H,a0 as z}from"./index-CeACcdR0.js";import{T as ue}from"./token-card-CbyySO9n.js";function ge(){const[n,m]=c.useState(""),[J,G]=c.useState("all"),[u,f]=c.useState("all"),[a,d]=c.useState(null),[U,x]=c.useState(!1),[Y,h]=c.useState(!1),{toast:o}=ae(),{data:Z=[],isLoading:_}=F({queryKey:["/api/tokens",n],enabled:!0}),{data:g,isLoading:X}=F({queryKey:["/api/marketplace/nfts"],refetchInterval:3e4}),p=T({mutationFn:async s=>await H(`/api/marketplace/buy/${s}`,{method:"POST",body:JSON.stringify({buyerId:"demo-buyer"})}),onSuccess:s=>{o({title:"Purchase Successful!",description:(s==null?void 0:s.message)||"NFT purchased successfully",duration:5e3}),z.invalidateQueries({queryKey:["/api/marketplace/nfts"]}),h(!1),d(null)},onError:s=>{o({title:"Purchase Failed",description:s instanceof Error?s.message:"Failed to buy NFT",variant:"destructive"})}}),j=T({mutationFn:async s=>await H(`/api/marketplace/burn/${s}`,{method:"POST",body:JSON.stringify({burnerId:"demo-burner"})}),onSuccess:s=>{o({title:"NFT Burned Successfully!",description:(s==null?void 0:s.message)||"NFT burned and value redeemed",duration:5e3}),z.invalidateQueries({queryKey:["/api/marketplace/nfts"]}),x(!1),d(null)},onError:s=>{o({title:"Burn Failed",description:s instanceof Error?s.message:"Failed to burn NFT",variant:"destructive"})}}),W=s=>{o({title:"Purchase Initiated",description:`Purchasing ${s.message} token for ${s.valuePerToken} SOL`})},y=Z.filter(s=>{if(n&&!s.message.toLowerCase().includes(n.toLowerCase()))return!1;if(u!=="all"){const l=parseFloat(s.valuePerToken||"0");switch(u){case"free":if(l!==0)return!1;break;case"low":if(l===0||l>.1)return!1;break;case"medium":if(l<=.1||l>1)return!1;break;case"high":if(l<=1)return!1;break}}return!0}),w=(g==null?void 0:g.nfts)||[],ee=s=>{switch(s==null?void 0:s.toLowerCase()){case"legendary":return"bg-gradient-to-r from-yellow-500 to-orange-500";case"epic":return"bg-gradient-to-r from-purple-500 to-pink-500";case"rare":return"bg-gradient-to-r from-blue-500 to-cyan-500";case"uncommon":return"bg-gradient-to-r from-green-500 to-emerald-500";default:return"bg-gradient-to-r from-gray-500 to-slate-500"}},se=s=>{switch(s==null?void 0:s.toLowerCase()){case"legendary":return e.jsx(me,{className:"w-4 h-4"});case"epic":return e.jsx(b,{className:"w-4 h-4"});case"rare":return e.jsx(de,{className:"w-4 h-4"});case"uncommon":return e.jsx(k,{className:"w-4 h-4"});default:return e.jsx(oe,{className:"w-4 h-4"})}};return e.jsx("div",{className:"min-h-screen text-white pt-20 pb-12 overflow-hidden",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 text-gradient",children:"ðŸš€ UNIFIED MARKETPLACE"}),e.jsx("p",{className:"text-xl text-gray-300",children:"Trade FLBY tokens and revolutionary FlutterArt NFTs with burn-to-redeem mechanics"})]}),e.jsxs(le,{defaultValue:"tokens",className:"w-full",children:[e.jsxs(re,{className:"grid w-full grid-cols-2 mb-8 glassmorphism electric-frame",children:[e.jsxs(S,{value:"tokens",className:"flex items-center gap-2 data-[state=active]:bg-primary/20 text-white",children:[e.jsx(k,{className:"w-4 h-4"}),"FLBY Tokens"]}),e.jsxs(S,{value:"nfts",className:"flex items-center gap-2 data-[state=active]:bg-secondary/20 text-white",children:[e.jsx(b,{className:"w-4 h-4"}),"FlutterArt NFTs"]})]}),e.jsxs(C,{value:"tokens",className:"space-y-8",children:[e.jsx(t,{className:"glassmorphism electric-frame",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(A,{placeholder:"Search tokens by message or creator...",value:n,onChange:s=>m(s.target.value),className:"pl-10 glassmorphism border-primary/30 text-white"})]}),e.jsxs(L,{value:u,onValueChange:f,children:[e.jsx(P,{className:"w-full md:w-48 glassmorphism border-primary/30 text-white",children:e.jsx(D,{placeholder:"Filter by price"})}),e.jsxs(E,{children:[e.jsx(r,{value:"all",children:"All Prices"}),e.jsx(r,{value:"free",children:"Free (0 SOL)"}),e.jsx(r,{value:"low",children:"Low (0-0.1 SOL)"}),e.jsx(r,{value:"medium",children:"Medium (0.1-1 SOL)"}),e.jsx(r,{value:"high",children:"High (1+ SOL)"})]})]})]})})}),_?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((s,l)=>e.jsx(t,{className:"bg-slate-900/50 border-slate-700 animate-pulse",children:e.jsxs(i,{className:"p-6",children:[e.jsx("div",{className:"h-6 bg-slate-800 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-slate-800 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-slate-800 rounded"})]})},l))}):y.length===0?e.jsx(t,{className:"bg-slate-900/50 border-slate-700",children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-white",children:"No tokens found"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Try adjusting your search or filter criteria"}),e.jsx(N,{onClick:()=>{m(""),f("all")},className:"bg-gradient-to-r from-blue-600 to-purple-600",children:"Clear Filters"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(s=>e.jsx(ue,{token:s,onBuy:()=>W(s)},s.id))})]}),e.jsxs(C,{value:"nfts",className:"space-y-8",children:[e.jsx(t,{className:"bg-slate-900/50 border-slate-700",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(B,{className:"absolute left-3 top-3 h-4 w-4 text-slate-400"}),e.jsx(A,{placeholder:"Search NFTs by message, collection, or rarity...",value:n,onChange:s=>m(s.target.value),className:"pl-10 bg-slate-800 border-slate-600 text-white"})]})}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(L,{value:J,onValueChange:G,children:[e.jsxs(P,{className:"w-48 bg-slate-800 border-slate-600 text-white",children:[e.jsx(te,{className:"w-4 h-4 mr-2"}),e.jsx(D,{placeholder:"Filter by..."})]}),e.jsxs(E,{children:[e.jsx(r,{value:"all",children:"All NFTs"}),e.jsx(r,{value:"voice",children:"Has Voice"}),e.jsx(r,{value:"image",children:"Has Image"}),e.jsx(r,{value:"burnable",children:"Burn-to-Redeem"}),e.jsx(r,{value:"legendary",children:"Legendary"}),e.jsx(r,{value:"epic",children:"Epic"}),e.jsx(r,{value:"rare",children:"Rare"})]})]})})]})})}),X?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[...Array(8)].map((s,l)=>e.jsx(t,{className:"bg-slate-900/50 border-slate-700 animate-pulse",children:e.jsxs(i,{className:"p-6",children:[e.jsx("div",{className:"aspect-square bg-slate-800 rounded-lg mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-slate-800 rounded"}),e.jsx("div",{className:"h-4 bg-slate-800 rounded w-2/3"})]})]})},l))}):w.length===0?e.jsx(t,{className:"bg-slate-900/50 border-slate-700",children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(b,{className:"w-16 h-16 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"No NFTs Available"}),e.jsx("p",{className:"text-slate-400",children:"No FlutterArt NFTs are currently listed for sale."})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:w.map(s=>e.jsx(t,{className:"bg-slate-900/50 border-slate-700 hover:border-blue-500/50 transition-all duration-300 group",children:e.jsxs(i,{className:"p-6",children:[e.jsxs("div",{className:"aspect-square bg-gradient-to-br from-slate-800 to-slate-900 rounded-lg mb-4 flex items-center justify-center relative overflow-hidden",children:[s.imageFile?e.jsx("img",{src:s.imageFile,alt:`NFT #${s.tokenNumber}`,className:"w-full h-full object-cover rounded-lg"}):e.jsx("div",{className:"text-6xl opacity-20",children:"ðŸ¦‹"}),s.rarity&&e.jsx(v,{className:`absolute top-2 right-2 ${ee(s.rarity)} text-white border-0`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[se(s.rarity),s.rarity]})}),e.jsxs("div",{className:"absolute bottom-2 left-2 flex gap-1",children:[s.imageFile&&e.jsx(v,{variant:"secondary",className:"bg-blue-500/20 text-blue-300 border-blue-500/30",children:e.jsx(ie,{className:"w-3 h-3"})}),s.voiceFile&&e.jsx(v,{variant:"secondary",className:"bg-purple-500/20 text-purple-300 border-purple-500/30",children:e.jsx(ce,{className:"w-3 h-3"})})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-white text-sm mb-1",children:[s.collectionName," #",s.tokenNumber]}),e.jsx("p",{className:"text-slate-400 text-xs line-clamp-2",children:s.message})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Price"}),e.jsxs("p",{className:"font-bold text-lg text-white",children:[s.price," ",s.currency]})]}),s.burnToRedeem&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"Burnable Value"}),e.jsxs("p",{className:"font-semibold text-sm text-orange-400",children:[s.originalValue," ",s.currency]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{onClick:()=>{d(s),h(!0)},className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",size:"sm",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),"Buy"]}),s.burnToRedeem&&e.jsx(N,{onClick:()=>{d(s),x(!0)},variant:"outline",className:"border-orange-500/50 text-orange-400 hover:bg-orange-500/10",size:"sm",children:e.jsx(I,{className:"w-4 h-4"})})]})]})]})]})},s.id))})]})]}),e.jsx(O,{open:Y,onOpenChange:h,children:e.jsxs(R,{className:"bg-slate-900 border-slate-700",children:[e.jsxs(V,{children:[e.jsxs(q,{className:"text-white",children:["Purchase NFT #",a==null?void 0:a.tokenNumber]}),e.jsxs(K,{className:"text-slate-300",children:["Are you sure you want to buy this NFT for ",a==null?void 0:a.price," ",a==null?void 0:a.currency,"? This action cannot be undone."]})]}),e.jsxs(M,{children:[e.jsx(Q,{className:"bg-slate-700 text-white border-slate-600",children:"Cancel"}),e.jsx($,{onClick:()=>a&&p.mutate(a.id),disabled:p.isPending,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:p.isPending?"Processing...":"Buy NFT"})]})]})}),e.jsx(O,{open:U,onOpenChange:x,children:e.jsxs(R,{className:"bg-slate-900 border-slate-700",children:[e.jsxs(V,{children:[e.jsxs(q,{className:"text-white flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-orange-500"}),"Burn NFT #",a==null?void 0:a.tokenNumber]}),e.jsx(K,{className:"text-slate-300",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:["Burning this NFT will permanently destroy it and redeem ",a==null?void 0:a.originalValue," ",a==null?void 0:a.currency,"."]}),e.jsx("p",{className:"text-orange-400 font-semibold",children:"This action is irreversible and creates permanent scarcity!"})]})})]}),e.jsxs(M,{children:[e.jsx(Q,{className:"bg-slate-700 text-white border-slate-600",children:"Cancel"}),e.jsx($,{onClick:()=>a&&j.mutate(a.id),disabled:j.isPending,className:"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700",children:j.isPending?"Burning...":"Burn & Redeem"})]})]})})]})})}export{ge as default};
