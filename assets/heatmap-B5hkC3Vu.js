import{r as d,j as e,C as o,e as p,f as v,p as k,B as S,h as M,ad as X,ac as Y,a as m,bd as E,o as I,a9 as K,Z as Q}from"./index-CeACcdR0.js";import{R as ee}from"./rotate-ccw-GY-61wQi.js";function se(){const j=d.useRef(null),b=d.useRef(),[r,f]=d.useState([]),[w,N]=d.useState([]),[h,$]=d.useState(!0),[T,z]=d.useState([75]),[C,V]=d.useState([100]),[u,R]=d.useState(null),[y,W]=d.useState({activeNodes:0,totalVolume:0,peakActivity:0,networkDensity:0});d.useEffect(()=>{const s=j.current;if(!s)return;const t=s.getContext("2d");if(!t)return;const a=()=>{const i=s.getBoundingClientRect();s.width=i.width*window.devicePixelRatio,s.height=i.height*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio)};return a(),window.addEventListener("resize",a),P(),h&&A(),()=>{window.removeEventListener("resize",a),b.current&&cancelAnimationFrame(b.current)}},[h]),d.useEffect(()=>{if(!h)return;const t=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,a=new WebSocket(t);a.onopen=()=>{console.log("Connected to heatmap WebSocket")},a.onmessage=n=>{const l=JSON.parse(n.data);if(l.type==="transaction"){const c={...l.data,timestamp:new Date(l.data.timestamp),intensity:100,connections:[]};f(g=>{const D=g.filter(x=>Math.sqrt(Math.pow(x.x-c.x,2)+Math.pow(x.y-c.y,2))<150&&Math.random()>.7);c.connections=D.map(x=>x.id).slice(0,3);const J=D.slice(0,2).map(x=>({from:c.id,to:x.id,value:Math.random()*50,type:Math.random()>.5?"token_flow":"value_flow",timestamp:new Date}));return N(x=>[...x,...J].slice(-50)),[...g,c].slice(-30)}),F()}else l.type==="init"&&(l.data.nodes&&f(l.data.nodes),l.data.connections&&N(l.data.connections))},a.onclose=()=>{console.log("Disconnected from heatmap WebSocket")},a.onerror=n=>{console.error("WebSocket error:",n)};const i=setInterval(()=>{H()},2e3);return()=>{a.close(),clearInterval(i)}},[h]);const P=()=>{const s=[],t=j.current;if(!t)return;const{width:a,height:i}=t.getBoundingClientRect();for(let n=0;n<15;n++){const l={id:`node_${n}`,x:Math.random()*a,y:Math.random()*i,value:Math.random()*100,type:["mint","transfer","redeem","sms"][Math.floor(Math.random()*4)],message:O(),timestamp:new Date(Date.now()-Math.random()*6e4),walletAddress:_(),intensity:Math.random()*100,connections:[]};s.push(l)}f(s)},H=()=>{const s=Date.now();f(t=>t.map(a=>({...a,intensity:Math.max(0,a.intensity-2)})).filter(a=>a.intensity>0)),N(t=>t.filter(a=>s-a.timestamp.getTime()<3e4))},A=()=>{const s=j.current,t=s==null?void 0:s.getContext("2d");if(!s||!t)return;const{width:a,height:i}=s.getBoundingClientRect();t.clearRect(0,0,a,i),L(t,a,i),w.forEach(n=>{U(t,n)}),r.forEach(n=>{B(t,n)}),G(t),q(t,a),h&&(b.current=requestAnimationFrame(A))},L=(s,t,a)=>{s.strokeStyle="rgba(100, 100, 255, 0.1)",s.lineWidth=.5;const i=40;for(let n=0;n<t;n+=i)s.beginPath(),s.moveTo(n,0),s.lineTo(n,a),s.stroke();for(let n=0;n<a;n+=i)s.beginPath(),s.moveTo(0,n),s.lineTo(t,n),s.stroke()},B=(s,t)=>{const a=t.intensity/100,i=4+t.value/50,n={mint:`rgba(34, 197, 94, ${a})`,transfer:`rgba(59, 130, 246, ${a})`,redeem:`rgba(168, 85, 247, ${a})`,sms:`rgba(239, 68, 68, ${a})`};s.fillStyle=n[t.type],s.beginPath(),s.arc(t.x,t.y,i,0,2*Math.PI),s.fill();const l=s.createRadialGradient(t.x,t.y,i,t.x,t.y,i*3);l.addColorStop(0,n[t.type]),l.addColorStop(1,"rgba(0,0,0,0)"),s.fillStyle=l,s.beginPath(),s.arc(t.x,t.y,i*3,0,2*Math.PI),s.fill(),t.value>80&&(s.fillStyle=`rgba(255, 255, 255, ${a})`,s.font="10px sans-serif",s.textAlign="center",s.fillText(Math.round(t.value).toString(),t.x,t.y-i-5))},U=(s,t)=>{const a=r.find(g=>g.id===t.from),i=r.find(g=>g.id===t.to);if(!a||!i)return;const n=Date.now()-t.timestamp.getTime(),l=Math.max(0,1-n/3e4);s.strokeStyle=t.type==="token_flow"?`rgba(59, 130, 246, ${l*.6})`:`rgba(34, 197, 94, ${l*.6})`,s.lineWidth=1+t.value/25;const c=Date.now()/1e3%1;s.setLineDash([5,5]),s.lineDashOffset=-c*10,s.beginPath(),s.moveTo(a.x,a.y),s.lineTo(i.x,i.y),s.stroke(),s.setLineDash([])},G=s=>{const t=Date.now()/1e3;r.forEach(a=>{if(a.intensity>80){const i=20+Math.sin(t*3+a.x*.01)*10,n=(Math.sin(t*2+a.y*.01)+1)*.1;s.strokeStyle=`rgba(255, 255, 255, ${n})`,s.lineWidth=2,s.beginPath(),s.arc(a.x,a.y,i,0,2*Math.PI),s.stroke()}})},F=()=>{W({activeNodes:r.filter(s=>s.intensity>50).length,totalVolume:r.reduce((s,t)=>s+t.value,0),peakActivity:Math.max(...r.map(s=>s.intensity),0),networkDensity:w.length/Math.max(r.length,1)*100})},q=(s,t)=>{const a={nodes:r.length,connections:w.length,avgIntensity:r.length>0?Math.round(r.reduce((l,c)=>l+c.intensity,0)/r.length):0};s.fillStyle="rgba(255, 255, 255, 0.8)",s.font="12px monospace",s.textAlign="right";const i=t-10;let n=30;s.fillText(`Nodes: ${a.nodes}`,i,n),n+=15,s.fillText(`Connections: ${a.connections}`,i,n),n+=15,s.fillText(`Avg Intensity: ${a.avgIntensity}%`,i,n)},O=()=>{const s=["thinking of you always","good morning sunshine","StakeForRewards","HodlTillMoon","sorry about yesterday","you got this champ","BullMarketVibes","happy birthday friend"];return s[Math.floor(Math.random()*s.length)]},_=()=>{const s="ABCDEFGHJKLMNPQRSTUVWXYZabcdefghjkmnpqrstuvwxyz123456789",t=Array.from({length:4},()=>s[Math.floor(Math.random()*s.length)]).join(""),a=Array.from({length:4},()=>s[Math.floor(Math.random()*s.length)]).join("");return`${t}...${a}`},Z=s=>{const t=j.current;if(!t)return;const a=t.getBoundingClientRect(),i=s.clientX-a.left,n=s.clientY-a.top,l=r.find(c=>Math.sqrt(Math.pow(c.x-i,2)+Math.pow(c.y-n,2))<15);R(l||null)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(o,{children:[e.jsx(p,{children:e.jsxs(v,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Real-time Transaction Heat Map",e.jsx(S,{variant:"secondary",className:"animate-pulse",children:"LIVE"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>$(!h),children:h?e.jsx(X,{className:"w-4 h-4"}):e.jsx(Y,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{f([]),N([]),P()},children:e.jsx(ee,{className:"w-4 h-4"})})]})]})}),e.jsxs(m,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:y.activeNodes}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Active Nodes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Math.round(y.totalVolume)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Volume"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[Math.round(y.peakActivity),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Peak Activity"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:[Math.round(y.networkDensity),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Network Density"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium",children:["Intensity: ",T[0],"%"]}),e.jsx(E,{value:T,onValueChange:z,max:100,step:1,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium",children:["Time Scale: ",C[0],"%"]}),e.jsx(E,{value:C,onValueChange:V,max:200,min:50,step:10,className:"mt-2"})]})]})]})]}),e.jsx(o,{children:e.jsx(m,{className:"p-0",children:e.jsxs("div",{className:"relative",children:[e.jsx("canvas",{ref:j,onClick:Z,className:"w-full h-96 cursor-crosshair bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 rounded-lg",style:{imageRendering:"crisp-edges"}}),e.jsx("div",{className:"absolute top-4 left-4 bg-black/70 backdrop-blur-sm rounded-lg p-3 text-xs",children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-white",children:"Mint"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{className:"text-white",children:"Transfer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-purple-500"}),e.jsx("span",{className:"text-white",children:"Redeem"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-white",children:"SMS"})]})]})}),u&&e.jsxs("div",{className:"absolute top-4 right-4 bg-black/80 backdrop-blur-sm rounded-lg p-4 text-white text-sm max-w-xs",children:[e.jsx("div",{className:"font-semibold mb-2",children:"Transaction Details"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{children:["Type: ",e.jsx("span",{className:"capitalize",children:u.type})]}),e.jsxs("div",{children:['Message: "',u.message,'"']}),e.jsxs("div",{children:["Wallet: ",u.walletAddress]}),e.jsxs("div",{children:["Value: ",Math.round(u.value)]}),e.jsxs("div",{children:["Intensity: ",Math.round(u.intensity),"%"]}),e.jsxs("div",{children:["Time: ",u.timestamp.toLocaleTimeString()]})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>R(null),className:"mt-2 w-full",children:"Close"})]})]})})}),e.jsxs(o,{children:[e.jsx(p,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Recent Network Activity"]})}),e.jsx(m,{children:e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:r.sort((s,t)=>t.timestamp.getTime()-s.timestamp.getTime()).slice(0,10).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded bg-muted/30 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.type==="mint"?"bg-green-500":s.type==="transfer"?"bg-blue-500":s.type==="redeem"?"bg-purple-500":"bg-red-500"}`}),e.jsxs("span",{children:['"',s.message,'"']})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.timestamp.toLocaleTimeString()})]},s.id))})})]})]})}function le(){return e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(K,{className:"w-8 h-8 text-purple-600"}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Global Transaction Heat Map"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Real-time visualization of token transactions, mints, transfers, and SMS interactions across the Flutterbye network. Watch the pulse of our blockchain ecosystem unfold in real-time."}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(S,{variant:"secondary",className:"animate-pulse",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),"LIVE DATA"]}),e.jsxs(S,{variant:"outline",children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"REAL-TIME"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(o,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20",children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:"2,341"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Transactions Today"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"+12% from yesterday"})]})}),e.jsx(o,{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border-blue-500/20",children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:"847"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Active Wallets"}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"+8% from yesterday"})]})}),e.jsx(o,{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border-purple-500/20",children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:"156"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"SMS Messages"}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"+23% from yesterday"})]})}),e.jsx(o,{className:"bg-gradient-to-br from-orange-500/10 to-red-500/10 border-orange-500/20",children:e.jsxs(m,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:"94.2%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Network Health"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"Excellent"})]})})]}),e.jsx(se,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(o,{children:[e.jsx(p,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(I,{className:"w-5 h-5"}),"Network Patterns"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Peak Activity Hours"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"2:00 PM - 6:00 PM UTC"})]}),e.jsx("div",{className:"text-2xl",children:"🔥"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Most Active Token Type"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Emotional SMS Tokens (43%)"})]}),e.jsx("div",{className:"text-2xl",children:"💝"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Network Clustering"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Strong social connections detected"})]}),e.jsx("div",{className:"text-2xl",children:"🌐"})]})]})})]}),e.jsxs(o,{children:[e.jsx(p,{children:e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-5 h-5"}),"Real-time Metrics"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Transaction Velocity"}),e.jsx("span",{children:"87%"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"87%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Network Congestion"}),e.jsx("span",{children:"23%"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:"23%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"SMS Integration Usage"}),e.jsx("span",{children:"64%"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:"64%"}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Value Distribution Efficiency"}),e.jsx("span",{children:"91%"})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"91%"}})})]})]})})]})]}),e.jsxs(o,{children:[e.jsx(p,{children:e.jsx(v,{children:"How to Use the Heat Map"})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Interactive Controls"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Click nodes to view transaction details"}),e.jsx("li",{children:"• Adjust intensity slider to filter activity levels"}),e.jsx("li",{children:"• Change time scale to speed up/slow down visualization"}),e.jsx("li",{children:"• Use play/pause to control real-time updates"}),e.jsx("li",{children:"• Reset button clears the canvas and starts fresh"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Visual Elements"}),e.jsxs("ul",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("li",{children:"• Node size indicates transaction value"}),e.jsx("li",{children:"• Color represents transaction type (mint, transfer, etc.)"}),e.jsx("li",{children:"• Connections show token flows between wallets"}),e.jsx("li",{children:"• Pulse effects highlight high-activity nodes"}),e.jsx("li",{children:"• Grid background provides spatial reference"})]})]})]})})]})]})}export{le as default};
