import{a3 as A,r as j,c as C,j as e,C as d,e as o,f as x,g,a as m,h as f,B as i,an as O,F as E,I as $,T as q,i as P,k,n as S,aA as T,aX as v,aY as U,az as K,aZ as L}from"./index-CeACcdR0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=A("ArrowDownLeft",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=A("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);function Z(){const[t,p]=j.useState(""),[n,D]=j.useState(""),[l,F]=j.useState("all"),{data:u=[],isLoading:M}=C({queryKey:["/api/users",t,"redemptions"],enabled:!!t}),{data:R=[],isLoading:V}=C({queryKey:["/api/transactions",t],enabled:!!t}),W=async()=>{try{const s="user-"+Math.random().toString(36).substr(2,9);p(s),v({title:"Wallet Connected",description:"Successfully connected to your wallet."})}catch{v({title:"Connection Failed",description:"Failed to connect wallet. Please try again.",variant:"destructive"})}},z=()=>{const s=u.map(a=>({Date:new Date(a.createdAt).toLocaleDateString(),Type:"Redemption",Amount:`${a.redeemedAmount} ${a.currency}`,Status:a.status,"Transaction ID":a.burnTransactionSignature})),r=Object.keys(s[0]||{}).join(","),c=s.map(a=>Object.values(a).join(",")).join(`
`),H=`${r}
${c}`,I=new Blob([H],{type:"text/csv"}),w=window.URL.createObjectURL(I),h=document.createElement("a");h.href=w,h.download=`flutterbye-activity-${new Date().toISOString().split("T")[0]}.csv`,h.click(),window.URL.revokeObjectURL(w),v({title:"Export Complete",description:"Activity data exported to CSV file."})},y=s=>{switch(s){case"pending":return e.jsxs(i,{variant:"secondary",children:[e.jsx(K,{className:"w-3 h-3 mr-1"}),"Pending"]});case"completed":case"confirmed":return e.jsxs(i,{variant:"default",children:[e.jsx(T,{className:"w-3 h-3 mr-1"}),"Completed"]});case"failed":return e.jsxs(i,{variant:"destructive",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"Failed"]});default:return e.jsx(i,{variant:"outline",children:s})}},B=s=>{switch(s){case"mint":return e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center",children:e.jsx(L,{className:"w-4 h-4 text-green-600"})});case"buy":case"receive":return e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center",children:e.jsx(Q,{className:"w-4 h-4 text-blue-600"})});case"sell":case"transfer":return e.jsx("div",{className:"w-8 h-8 rounded-full bg-orange-100 dark:bg-orange-900 flex items-center justify-center",children:e.jsx(L,{className:"w-4 h-4 text-orange-600"})});default:return e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-900 flex items-center justify-center",children:e.jsx(X,{className:"w-4 h-4 text-gray-600"})})}},N=u.filter(s=>{const r=!n||s.createdAt.includes(n),c=l==="all"||s.status===l;return r&&c}),b=R.filter(s=>{const r=!n||s.createdAt.includes(n),c=l==="all"||s.status===l;return r&&c});return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold mb-4 bg-gradient-to-r from-blue-400 to-green-400 bg-clip-text text-transparent",children:"My Activity"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"Track your token transactions and redemption history"})]}),e.jsxs(d,{className:"mb-8",children:[e.jsxs(o,{children:[e.jsx(x,{children:"Connect Wallet"}),e.jsx(g,{children:"Connect your wallet to view your activity history"})]}),e.jsx(m,{children:t?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(i,{variant:"outline",className:"text-sm",children:["Connected: ",t]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(f,{onClick:z,variant:"outline",size:"sm",disabled:u.length===0,children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),e.jsx(f,{variant:"outline",onClick:()=>p(""),size:"sm",children:"Disconnect"})]})]}):e.jsx(f,{onClick:W,size:"lg",className:"w-full sm:w-auto",children:"Connect Wallet"})})]}),t&&e.jsxs(e.Fragment,{children:[e.jsxs(d,{className:"mb-6",children:[e.jsx(o,{children:e.jsxs(x,{className:"text-lg flex items-center",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsx(m,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Date"}),e.jsx($,{type:"date",value:n,onChange:s=>D(s.target.value),placeholder:"Filter by date"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs("select",{value:l,onChange:s=>F(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"failed",children:"Failed"})]})]})]})})]}),e.jsxs(q,{defaultValue:"redemptions",className:"w-full",children:[e.jsxs(P,{className:"grid w-full grid-cols-2",children:[e.jsx(k,{value:"redemptions",children:"Redemptions"}),e.jsx(k,{value:"transactions",children:"Transactions"})]}),e.jsx(S,{value:"redemptions",className:"mt-6",children:e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Redemption History"}),e.jsx(g,{children:"Track all your token redemptions and their status"})]}),e.jsx(m,{children:M?e.jsx("div",{className:"text-center py-8",children:"Loading redemptions..."}):N.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No redemptions found"}):e.jsx("div",{className:"space-y-4",children:N.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center",children:e.jsx(T,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Token Redemption"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium text-green-600",children:["+",s.redeemedAmount," ",s.currency]}),e.jsx("div",{className:"text-sm",children:y(s.status)})]})]},s.id))})})]})}),e.jsx(S,{value:"transactions",className:"mt-6",children:e.jsxs(d,{children:[e.jsxs(o,{children:[e.jsx(x,{children:"Transaction History"}),e.jsx(g,{children:"View all your token mints, buys, sells, and transfers"})]}),e.jsx(m,{children:V?e.jsx("div",{className:"text-center py-8",children:"Loading transactions..."}):b.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No transactions found"}):e.jsx("div",{className:"space-y-4",children:b.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[B(s.type),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium capitalize",children:[s.type," Token"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Quantity: ",s.quantity]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(s.createdAt).toLocaleString()})]})]}),e.jsxs("div",{className:"text-right",children:[s.totalValue&&e.jsxs("div",{className:"font-medium",children:[s.totalValue," SOL"]}),e.jsx("div",{className:"text-sm",children:y(s.status)})]})]},s.id))})})]})})]})]})]})})}export{Z as default};
