import{r as N,b as Q,aT as R,c as U,d as m,j as e,a6 as $,C as r,a as l,bQ as b,a8 as B,E as I,T as Y,i as D,k,n as L,e as x,f as p,aM as u,aG as y,I as f,h as i,a$ as G,B as M,bv as P,am as h}from"./index-CeACcdR0.js";import{K as j}from"./key-I2paB0_o.js";import{U as O}from"./user-check-B1MM78Ob.js";function H(){const[d,g]=N.useState(""),[n,w]=N.useState(""),[C,E]=N.useState(""),{toast:t}=Q(),o=R(),{data:v,isLoading:q}=U({queryKey:["/api/admin/early-access/status"],refetchInterval:3e4}),A=m({mutationFn:async()=>(await h("POST","/api/admin/early-access/add-code",{code:d.toUpperCase()})).json(),onSuccess:s=>{s.success?(t({title:"Access Code Added",description:`Code ${d.toUpperCase()} added successfully`}),g(""),o.invalidateQueries({queryKey:["/api/admin/early-access/status"]})):t({title:"Error",description:s.message||"Failed to add access code",variant:"destructive"})},onError:()=>{t({title:"Error",description:"Failed to add access code",variant:"destructive"})}}),F=m({mutationFn:async()=>(await h("POST","/api/admin/early-access/add-email",{email:n.toLowerCase(),notes:C})).json(),onSuccess:s=>{s.success?(t({title:"Email Approved",description:`${n.toLowerCase()} added to approved list`}),w(""),E(""),o.invalidateQueries({queryKey:["/api/admin/early-access/status"]})):t({title:"Error",description:s.message||"Failed to add email",variant:"destructive"})},onError:()=>{t({title:"Error",description:"Failed to add email",variant:"destructive"})}}),S=m({mutationFn:async s=>(await h("DELETE",`/api/admin/early-access/remove-code/${s}`)).json(),onSuccess:(s,a)=>{s.success&&(t({title:"Access Code Removed",description:`Code ${a} removed successfully`}),o.invalidateQueries({queryKey:["/api/admin/early-access/status"]}))},onError:()=>{t({title:"Error",description:"Failed to remove access code",variant:"destructive"})}}),T=m({mutationFn:async s=>(await h("DELETE",`/api/admin/early-access/remove-email/${s}`)).json(),onSuccess:(s,a)=>{s.success&&(t({title:"Email Removed",description:`${a} removed from approved list`}),o.invalidateQueries({queryKey:["/api/admin/early-access/status"]}))},onError:()=>{t({title:"Error",description:"Failed to remove email",variant:"destructive"})}}),K=()=>{const s="FLBY-EARLY-2025-",a=Math.random().toString(36).substring(2,5).toUpperCase();g(s+a)};if(q)return e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-electric-blue border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-electric-blue",children:"Loading early access management..."})]})});const c=(v==null?void 0:v.stats)||{totalAccessCodes:0,totalApprovedEmails:0,activeSessions:0,accessCodes:[],approvedEmails:[]};return e.jsx("div",{className:"min-h-screen bg-black text-white p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"border-b border-electric-blue/30 pb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx($,{className:"w-8 h-8 text-electric-blue"}),e.jsx("h1",{className:"text-4xl font-bold text-gradient",children:"Early Access Management"})]}),e.jsx("p",{className:"text-gray-300 text-lg",children:"Manage access codes and approved emails for the FlutterBye early access gateway"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(r,{className:"electric-frame bg-gradient-to-br from-blue-900/20 to-blue-700/20",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-8 h-8 text-electric-blue"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Access Codes"}),e.jsx("p",{className:"text-2xl font-bold text-electric-blue",children:c.totalAccessCodes})]})]})})}),e.jsx(r,{className:"electric-frame bg-gradient-to-br from-green-900/20 to-green-700/20",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"w-8 h-8 text-electric-green"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Approved Emails"}),e.jsx("p",{className:"text-2xl font-bold text-electric-green",children:c.totalApprovedEmails})]})]})})}),e.jsx(r,{className:"electric-frame bg-gradient-to-br from-purple-900/20 to-purple-700/20",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(B,{className:"w-8 h-8 text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Active Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-purple-400",children:c.activeSessions})]})]})})}),e.jsx(r,{className:"electric-frame bg-gradient-to-br from-yellow-900/20 to-yellow-700/20",children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-8 h-8 text-yellow-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400",children:"Gateway Status"}),e.jsx("p",{className:"text-lg font-bold text-yellow-400",children:"ACTIVE"})]})]})})})]}),e.jsxs(Y,{defaultValue:"codes",className:"space-y-6",children:[e.jsxs(D,{className:"grid w-full grid-cols-2 bg-gray-800 electric-frame",children:[e.jsxs(k,{value:"codes",className:"data-[state=active]:bg-electric-blue data-[state=active]:text-black",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Access Codes"]}),e.jsxs(k,{value:"emails",className:"data-[state=active]:bg-electric-green data-[state=active]:text-black",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Approved Emails"]})]}),e.jsxs(L,{value:"codes",className:"space-y-6",children:[e.jsxs(r,{className:"electric-frame",children:[e.jsx(x,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-electric-blue"}),"Add New Access Code"]})}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(y,{htmlFor:"new-code",children:"Access Code"}),e.jsx(f,{id:"new-code",placeholder:"FLBY-EARLY-2025-XXX",value:d,onChange:s=>g(s.target.value.toUpperCase()),className:"bg-gray-800 border-electric-blue/30"})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsxs(i,{onClick:K,variant:"outline",className:"border-electric-blue/30 text-electric-blue hover:bg-electric-blue hover:text-black",children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Generate"]}),e.jsxs(i,{onClick:()=>A.mutate(),disabled:!d.trim()||A.isPending,className:"bg-electric-blue text-black hover:bg-electric-blue/80",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Add Code"]})]})]})})]}),e.jsxs(r,{className:"electric-frame",children:[e.jsx(x,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"w-5 h-5 text-electric-blue"}),"Active Access Codes (",c.accessCodes.length,")"]})}),e.jsx(l,{children:c.accessCodes.length===0?e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No access codes configured"}):e.jsx("div",{className:"grid gap-3",children:c.accessCodes.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg electric-frame",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-4 h-4 text-electric-blue"}),e.jsx("span",{className:"font-mono text-electric-blue",children:s}),e.jsx(M,{variant:"secondary",className:"bg-green-900/50 text-green-400",children:"Active"})]}),e.jsx(i,{onClick:()=>S.mutate(s),disabled:S.isPending,variant:"destructive",size:"sm",children:e.jsx(P,{className:"w-4 h-4"})})]},a))})})]})]}),e.jsxs(L,{value:"emails",className:"space-y-6",children:[e.jsxs(r,{className:"electric-frame",children:[e.jsx(x,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-5 h-5 text-electric-green"}),"Add Approved Email"]})}),e.jsx(l,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"new-email",children:"Email Address"}),e.jsx(f,{id:"new-email",type:"email",placeholder:"user@example.com",value:n,onChange:s=>w(s.target.value.toLowerCase()),className:"bg-gray-800 border-electric-blue/30"})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"email-notes",children:"Notes (Optional)"}),e.jsx(f,{id:"email-notes",placeholder:"VIP user, beta tester, etc.",value:C,onChange:s=>E(s.target.value),className:"bg-gray-800 border-electric-blue/30"})]}),e.jsxs(i,{onClick:()=>F.mutate(),disabled:!n.trim()||F.isPending,className:"bg-electric-green text-black hover:bg-electric-green/80",children:[e.jsx(u,{className:"w-4 h-4 mr-2"}),"Approve Email"]})]})})]}),e.jsxs(r,{className:"electric-frame",children:[e.jsx(x,{children:e.jsxs(p,{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-electric-green"}),"Approved Emails (",c.approvedEmails.length,")"]})}),e.jsx(l,{children:c.approvedEmails.length===0?e.jsx("p",{className:"text-gray-400 text-center py-8",children:"No emails approved"}):e.jsx("div",{className:"grid gap-3",children:c.approvedEmails.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-800/50 rounded-lg electric-frame",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(O,{className:"w-4 h-4 text-electric-green"}),e.jsx("span",{className:"text-electric-green",children:s}),e.jsx(M,{variant:"secondary",className:"bg-green-900/50 text-green-400",children:"Approved"})]}),e.jsx(i,{onClick:()=>T.mutate(s),disabled:T.isPending,variant:"destructive",size:"sm",children:e.jsx(P,{className:"w-4 h-4"})})]},a))})})]})]})]})]})})}export{H as default};
