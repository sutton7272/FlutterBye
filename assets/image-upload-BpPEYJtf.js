import{a3 as U,r as g,b as M,j as e,aG as O,B as S,C as y,a as N,h as b,aJ as T,aB as w,y as $}from"./index-CeACcdR0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=U("FileImage",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]]);function q({onImageSelect:I,onImageRemove:k,selectedImage:h,disabled:c=!1}){const[D,m]=g.useState(!1),[f,u]=g.useState(!1),o=g.useRef(null),{toast:d}=M(),P=a=>{if(!a.type.startsWith("image/"))return d({title:"Invalid file type",description:"Please upload an image file (PNG, JPG, GIF, WebP)",variant:"destructive"}),!1;const s=5*1024*1024;return a.size>s?(d({title:"File too large",description:"Image must be smaller than 5MB",variant:"destructive"}),!1):!0},v=async a=>{if(P(a)){u(!0);try{const s=await C(a,400,400),t=new FileReader;t.onload=p=>{var i;const x=((i=p.target)==null?void 0:i.result).split(",")[1];I(x),u(!1),d({title:"Image uploaded",description:"Token image has been set successfully"})},t.readAsDataURL(s)}catch{u(!1),d({title:"Upload failed",description:"Failed to process image. Please try again.",variant:"destructive"})}}},C=(a,s,t)=>new Promise(p=>{const l=document.createElement("canvas"),x=l.getContext("2d"),i=new Image;i.onload=()=>{let{width:r,height:n}=i;r>n?r>s&&(n=n*s/r,r=s):n>t&&(r=r*t/n,n=t),l.width=r,l.height=n,x.drawImage(i,0,0,r,n),l.toBlob(j=>{j&&p(j)},"image/png",.9)},i.src=URL.createObjectURL(a)}),F=a=>{var t;const s=(t=a.target.files)==null?void 0:t[0];s&&v(s)},L=a=>{a.preventDefault(),m(!1);const s=a.dataTransfer.files[0];s&&v(s)},R=a=>{a.preventDefault(),m(!0)},z=()=>{m(!1)},B=()=>{var a;!c&&!f&&((a=o.current)==null||a.click())},G=()=>{k(),o.current&&(o.current.value="")};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(O,{children:"Token Image (Optional)"}),e.jsx(S,{variant:"secondary",className:"text-xs",children:"+0.005 SOL fee"})]}),h?e.jsx(y,{className:"relative overflow-hidden",children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:`data:image/png;base64,${h}`,alt:"Token preview",className:"w-full h-48 object-cover rounded-lg"}),e.jsx(b,{variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:G,disabled:c,children:e.jsx(T,{className:"w-4 h-4"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Click the X to remove or upload a new image"})]})}):e.jsx(y,{className:`border-2 border-dashed transition-colors cursor-pointer ${D?"border-primary bg-primary/10":"border-border hover:border-primary/50"} ${c?"opacity-50 cursor-not-allowed":""}`,onClick:B,onDrop:L,onDragOver:R,onDragLeave:z,children:e.jsx(N,{className:"p-8 text-center",children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-primary/20 rounded-full flex items-center justify-center animate-pulse",children:e.jsx(w,{className:"w-6 h-6 text-primary"})}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Processing image..."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"w-12 h-12 mx-auto bg-muted rounded-full flex items-center justify-center",children:e.jsx($,{className:"w-6 h-6 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Upload token image"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Drag & drop or click to select"}),e.jsxs(b,{type:"button",variant:"outline",size:"sm",disabled:c,children:[e.jsx(w,{className:"w-4 h-4 mr-2"}),"Choose Image"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG, GIF, WebP • Max 5MB • Recommended: 400x400px"})]})})}),e.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:F,className:"hidden",disabled:c})]})}export{J as F,q as I};
