import{b as be,aT as Ne,r as l,c as ie,am as u,d as D,j as e,aj as w,C as c,e as f,f as P,g as T,a as d,aG as a,I as r,B as m,as as q,bk as re,h as o,aM as U,at as L,au as $,av as M,bs as A,o as ve,a8 as ye,b9 as we,aJ as fe,b0 as le,s as R,t as V,v as B,w as z,x as h,aL as ne,bX as ce,ao as Pe,bv as Te}from"./index-CeACcdR0.js";import{C as Se}from"./credit-card-BeYrZ9L8.js";function Qe(){const{toast:x}=be(),S=Ne(),[G,F]=l.useState(!1),[de,C]=l.useState(!1),[n,K]=l.useState(null),[p,J]=l.useState(1),[b,Y]=l.useState([]),[H,xe]=l.useState([]),[N,X]=l.useState(null),[j,v]=l.useState({}),[Fe,oe]=l.useState(!1),[y,_]=l.useState("token-pricing"),{data:k,isLoading:W}=ie({queryKey:["/api/admin/pricing-tiers"]}),{data:i,refetch:Z}=ie({queryKey:["/api/calculate-token-price",p],queryFn:async()=>await u("/api/calculate-token-price",{method:"POST",body:JSON.stringify({quantity:p}),headers:{"Content-Type":"application/json"}}),enabled:p>0});l.useEffect(()=>{ee()},[]);const ee=async()=>{try{const s=await u("GET","/api/subscription/plans");if(s.ok){const g=await s.json();Y(Object.values(g))}const t=await u("GET","/api/admin/subscriptions");if(t.ok){const g=await t.json();xe(g.subscriptions||[])}}catch(s){console.error("Error loading subscription data:",s)}},Q=D({mutationFn:async s=>await u("/api/admin/pricing-tiers",{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}}),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/admin/pricing-tiers"]}),F(!1),x({title:"Success",description:"Pricing tier created successfully"})},onError:s=>{x({title:"Error",description:s.message,variant:"destructive"})}}),I=D({mutationFn:async({tierId:s,...t})=>await u(`/api/admin/pricing-tiers/${s}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/admin/pricing-tiers"]}),C(!1),K(null),x({title:"Success",description:"Pricing tier updated successfully"})},onError:s=>{x({title:"Error",description:s.message,variant:"destructive"})}}),se=D({mutationFn:async s=>await u(`/api/admin/pricing-tiers/${s}`,{method:"DELETE"}),onSuccess:()=>{S.invalidateQueries({queryKey:["/api/admin/pricing-tiers"]}),x({title:"Success",description:"Pricing tier deactivated successfully"})},onError:s=>{x({title:"Error",description:s.message,variant:"destructive"})}}),me=s=>{const t={tierName:s.get("tierName"),minQuantity:parseInt(s.get("minQuantity")),maxQuantity:s.get("maxQuantity")?parseInt(s.get("maxQuantity")):null,basePricePerToken:s.get("basePricePerToken"),discountPercentage:s.get("discountPercentage"),currency:s.get("currency")||"USD",gasFeeIncluded:s.get("gasFeeIncluded")==="on",sortOrder:parseInt(s.get("sortOrder"))||0};Q.mutate(t)},he=s=>{if(!n)return;const t={tierId:n.id,tierName:s.get("tierName"),minQuantity:parseInt(s.get("minQuantity")),maxQuantity:s.get("maxQuantity")?parseInt(s.get("maxQuantity")):null,basePricePerToken:s.get("basePricePerToken"),discountPercentage:s.get("discountPercentage"),currency:s.get("currency")||"USD",gasFeeIncluded:s.get("gasFeeIncluded")==="on",sortOrder:parseInt(s.get("sortOrder"))||0};I.mutate(t)},E=(k==null?void 0:k.tiers)||[];l.useEffect(()=>{p>0&&Z()},[p,Z]);const ue=s=>{X(s.id),v({...s})},te=()=>{X(null),v({})},pe=async()=>{if(!(!N||!j))try{if((await u("PUT",`/api/admin/subscription/plans/${N}`,j)).ok)x({title:"Plan Updated",description:"Subscription plan has been updated successfully."}),Y(b.map(t=>t.id===N?{...t,...j}:t)),te();else throw new Error("Failed to update plan")}catch{x({title:"Update Failed",description:"Failed to update subscription plan.",variant:"destructive"})}},je=async(s,t)=>{try{if((await u("PUT",`/api/subscription/${s}`,{newPlan:t})).ok)x({title:"Subscription Updated",description:"Customer subscription has been updated successfully."}),ee();else throw new Error("Failed to update subscription")}catch{x({title:"Update Failed",description:"Failed to update customer subscription.",variant:"destructive"})}},ae=b.reduce((s,t)=>s+(t.monthlyRevenue||0),0),O=b.reduce((s,t)=>s+(t.subscriberCount||0),0),ge=O>0?ae/O:0;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 via-purple-400 to-cyan-600 bg-clip-text text-transparent",children:"Pricing & Subscription Management"}),e.jsx("p",{className:"text-blue-300 text-lg",children:"Configure token pricing, subscription plans, and manage customer billing"})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"border-b border-slate-700 mb-6",children:e.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[e.jsxs("button",{onClick:()=>_("token-pricing"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${y==="token-pricing"?"border-cyan-500 text-cyan-400":"border-transparent text-slate-400 hover:text-slate-300 hover:border-slate-300"}`,children:[e.jsx(w,{className:"w-4 h-4 inline mr-2"}),"Token Pricing"]}),e.jsxs("button",{onClick:()=>_("subscriptions"),className:`whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm ${y==="subscriptions"?"border-cyan-500 text-cyan-400":"border-transparent text-slate-400 hover:text-slate-300 hover:border-slate-300"}`,children:[e.jsx(Se,{className:"w-4 h-4 inline mr-2"}),"Subscription Management"]})]})}),y==="token-pricing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs(c,{className:"bg-slate-800/50 border-blue-500/30",children:[e.jsxs(f,{children:[e.jsxs(P,{className:"text-white flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"Price Calculator"]}),e.jsx(T,{className:"text-blue-300",children:"Test pricing calculations across different quantities"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(a,{htmlFor:"quantity",className:"text-white",children:"Quantity"}),e.jsx(r,{id:"quantity",type:"number",min:"1",value:p,onChange:s=>J(parseInt(s.target.value)||1),className:"bg-slate-700 border-slate-600 text-white"})]}),i&&e.jsxs("div",{className:"flex-2 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-300 text-sm",children:"Price per Token"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",i.pricePerToken.toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-300 text-sm",children:"Total Price"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",i.totalPrice.toFixed(2)]})]})]})]}),(i==null?void 0:i.tier)&&e.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:e.jsxs("p",{className:"text-blue-200",children:[e.jsx("strong",{children:"Active Tier:"})," ",i.tier.tierName,i.tier.discountPercentage!=="0"&&e.jsxs(m,{variant:"secondary",className:"ml-2",children:[i.tier.discountPercentage,"% off"]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Pricing Tiers"}),e.jsxs(q,{open:G,onOpenChange:F,children:[e.jsx(re,{asChild:!0,children:e.jsxs(o,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Tier"]})}),e.jsx(L,{className:"bg-slate-800 border-slate-600",children:e.jsxs($,{children:[e.jsx(M,{className:"text-white",children:"Create New Pricing Tier"}),e.jsx(A,{className:"text-slate-300",children:"Add a new pricing tier with quantity-based discounts"})]})})]})]}),e.jsx("div",{className:"grid gap-4",children:W?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-cyan-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Loading pricing tiers..."})]}):E.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-400",children:"No pricing tiers configured yet."})}):E.map(s=>e.jsx(c,{className:"bg-slate-800/50 border-slate-600",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:s.tierName}),e.jsxs("p",{className:"text-slate-300",children:[s.minQuantity," - ",s.maxQuantity||"âˆž"," tokens"]}),e.jsx("div",{className:"mt-2",children:e.jsx(m,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",parseFloat(s.finalPricePerToken).toFixed(2)]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"per token"}),s.discountPercentage!=="0"&&e.jsxs(m,{variant:"outline",className:"mt-1",children:[s.discountPercentage,"% off"]})]})]})})},s.id))})]}),y==="subscriptions"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(c,{className:"bg-gradient-to-br from-emerald-900/50 to-emerald-800/30 border-emerald-500/30",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-emerald-300 text-sm font-medium",children:"Total Monthly Revenue"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",ae.toLocaleString()]})]}),e.jsx("div",{className:"bg-emerald-500/20 p-3 rounded-full",children:e.jsx(ve,{className:"w-6 h-6 text-emerald-400"})})]})})}),e.jsx(c,{className:"bg-gradient-to-br from-blue-900/50 to-blue-800/30 border-blue-500/30",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-300 text-sm font-medium",children:"Active Subscribers"}),e.jsx("p",{className:"text-white text-2xl font-bold",children:O.toLocaleString()})]}),e.jsx("div",{className:"bg-blue-500/20 p-3 rounded-full",children:e.jsx(ye,{className:"w-6 h-6 text-blue-400"})})]})})}),e.jsx(c,{className:"bg-gradient-to-br from-purple-900/50 to-purple-800/30 border-purple-500/30",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-300 text-sm font-medium",children:"Avg Revenue Per User"}),e.jsxs("p",{className:"text-white text-2xl font-bold",children:["$",ge.toFixed(2)]})]}),e.jsx("div",{className:"bg-purple-500/20 p-3 rounded-full",children:e.jsx(w,{className:"w-6 h-6 text-purple-400"})})]})})})]}),e.jsxs(c,{className:"bg-slate-800/50 border-slate-600",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(P,{className:"text-white",children:"Subscription Plans"}),e.jsx(T,{className:"text-slate-300",children:"Manage pricing and features for subscription plans"})]}),e.jsxs(o,{onClick:()=>oe(!0),className:"bg-cyan-600 hover:bg-cyan-700",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"New Plan"]})]})}),e.jsx(d,{children:e.jsx("div",{className:"grid gap-4",children:b.map(s=>e.jsx(c,{className:"bg-slate-700/50 border-slate-600",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{className:"flex-1",children:N===s.id?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(a,{className:"text-white",children:"Plan Name"}),e.jsx(r,{value:j.name||"",onChange:t=>v({...j,name:t.target.value}),className:"bg-slate-600 border-slate-500 text-white"})]}),e.jsxs("div",{children:[e.jsx(a,{className:"text-white",children:"Price ($)"}),e.jsx(r,{type:"number",step:"0.01",value:j.price||"",onChange:t=>v({...j,price:parseFloat(t.target.value)}),className:"bg-slate-600 border-slate-500 text-white"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(o,{onClick:pe,size:"sm",className:"bg-green-600 hover:bg-green-700",children:[e.jsx(we,{className:"w-4 h-4 mr-1"}),"Save"]}),e.jsxs(o,{onClick:te,size:"sm",variant:"outline",children:[e.jsx(fe,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-white font-semibold text-lg",children:s.name}),e.jsxs(m,{className:"bg-cyan-500/20 text-cyan-400",children:["$",s.price,"/month"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400",children:"Subscribers"}),e.jsx("p",{className:"text-white font-medium",children:s.subscriberCount||0})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400",children:"Monthly Revenue"}),e.jsxs("p",{className:"text-white font-medium",children:["$",(s.monthlyRevenue||0).toLocaleString()]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-slate-400 text-sm mb-1",children:"Features:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.features.map((t,g)=>e.jsx(m,{variant:"outline",className:"text-xs",children:t},g))})]})]})}),N!==s.id&&e.jsx(o,{onClick:()=>ue(s),size:"sm",variant:"outline",className:"border-cyan-500/30 text-cyan-400 hover:bg-cyan-500/10",children:e.jsx(le,{className:"w-4 h-4"})})]})})},s.id))})})]}),e.jsxs(c,{className:"bg-slate-800/50 border-slate-600",children:[e.jsxs(f,{children:[e.jsx(P,{className:"text-white",children:"Customer Subscriptions"}),e.jsx(T,{className:"text-slate-300",children:"Manage individual customer subscriptions and billing"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:H.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-slate-400",children:"No active subscriptions found."})}):H.map(s=>e.jsx(c,{className:"bg-slate-700/30 border-slate-600",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.customerEmail}),e.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[e.jsx(m,{variant:s.status==="active"?"default":"secondary",children:s.status}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Plan: ",s.planId]}),e.jsxs("p",{className:"text-slate-400 text-sm",children:["Expires: ",new Date(s.currentPeriodEnd*1e3).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(R,{onValueChange:t=>je(s.id,t),defaultValue:s.planId,children:[e.jsx(V,{className:"w-40 bg-slate-600 border-slate-500",children:e.jsx(B,{placeholder:"Change plan"})}),e.jsx(z,{children:b.map(t=>e.jsx(h,{value:t.id,children:t.name},t.id))})]})})]})})},s.id))})})]})]})]}),e.jsxs(c,{className:"bg-slate-800/50 border-blue-500/30",children:[e.jsxs(f,{children:[e.jsxs(P,{className:"text-white flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),"Price Calculator"]}),e.jsx(T,{className:"text-blue-300",children:"Test pricing calculations across different quantities"})]}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(a,{htmlFor:"quantity",className:"text-white",children:"Quantity"}),e.jsx(r,{id:"quantity",type:"number",min:"1",value:p,onChange:s=>J(parseInt(s.target.value)||1),className:"bg-slate-700 border-slate-600 text-white"})]}),i&&e.jsxs("div",{className:"flex-2 grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-300 text-sm",children:"Price per Token"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",i.pricePerToken.toFixed(2)]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-300 text-sm",children:"Total Price"}),e.jsxs("p",{className:"text-white text-xl font-bold",children:["$",i.totalPrice.toFixed(2)]})]})]})]}),(i==null?void 0:i.tier)&&e.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded-lg",children:e.jsxs("p",{className:"text-blue-200",children:[e.jsx("strong",{children:"Active Tier:"})," ",i.tier.tierName,i.tier.discountPercentage!=="0"&&e.jsxs(m,{variant:"secondary",className:"ml-2",children:[i.tier.discountPercentage,"% off"]})]})})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Pricing Tiers"}),e.jsxs(q,{open:G,onOpenChange:F,children:[e.jsx(re,{asChild:!0,children:e.jsxs(o,{className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),"Add Tier"]})}),e.jsxs(L,{className:"bg-slate-800 border-slate-600",children:[e.jsxs($,{children:[e.jsx(M,{className:"text-white",children:"Create New Pricing Tier"}),e.jsx(A,{className:"text-slate-300",children:"Add a new pricing tier with quantity-based discounts"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),me(new FormData(s.currentTarget))},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"tierName",className:"text-white",children:"Tier Name"}),e.jsx(r,{id:"tierName",name:"tierName",placeholder:"e.g., bulk_50",className:"bg-slate-700 border-slate-600 text-white",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"basePricePerToken",className:"text-white",children:"Base Price ($)"}),e.jsx(r,{id:"basePricePerToken",name:"basePricePerToken",type:"number",step:"0.01",placeholder:"2.00",className:"bg-slate-700 border-slate-600 text-white",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"minQuantity",className:"text-white",children:"Min Quantity"}),e.jsx(r,{id:"minQuantity",name:"minQuantity",type:"number",min:"1",className:"bg-slate-700 border-slate-600 text-white",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"maxQuantity",className:"text-white",children:"Max Quantity"}),e.jsx(r,{id:"maxQuantity",name:"maxQuantity",type:"number",placeholder:"Leave empty for unlimited",className:"bg-slate-700 border-slate-600 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"discountPercentage",className:"text-white",children:"Discount %"}),e.jsx(r,{id:"discountPercentage",name:"discountPercentage",type:"number",min:"0",max:"100",step:"0.1",placeholder:"0",className:"bg-slate-700 border-slate-600 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"currency",className:"text-white",children:"Currency"}),e.jsxs(R,{name:"currency",defaultValue:"USD",children:[e.jsx(V,{className:"bg-slate-700 border-slate-600 text-white",children:e.jsx(B,{})}),e.jsxs(z,{children:[e.jsx(h,{value:"USD",children:"USD"}),e.jsx(h,{value:"SOL",children:"SOL"}),e.jsx(h,{value:"USDC",children:"USDC"}),e.jsx(h,{value:"FLBY",children:"FLBY"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"sortOrder",className:"text-white",children:"Sort Order"}),e.jsx(r,{id:"sortOrder",name:"sortOrder",type:"number",min:"0",placeholder:"0",className:"bg-slate-700 border-slate-600 text-white"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{id:"gasFeeIncluded",name:"gasFeeIncluded",defaultChecked:!0}),e.jsx(a,{htmlFor:"gasFeeIncluded",className:"text-white",children:"Include Gas Fees"})]})]}),e.jsx(ce,{children:e.jsx(o,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:Q.isPending,children:Q.isPending?"Creating...":"Create Tier"})})]})]})]})]}),W?e.jsx("div",{className:"text-center text-white",children:"Loading pricing tiers..."}):e.jsx("div",{className:"grid gap-4",children:E.map(s=>e.jsx(c,{className:"bg-slate-800/50 border-blue-500/30",children:e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:s.tierName}),!s.isActive&&e.jsx(m,{variant:"destructive",children:"Inactive"}),s.discountPercentage!=="0"&&e.jsxs(m,{variant:"secondary",className:"bg-green-600",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),s.discountPercentage,"% off"]})]}),e.jsxs("p",{className:"text-blue-300",children:["Quantity: ",s.minQuantity,s.maxQuantity?` - ${s.maxQuantity}`:"+"," tokens"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("p",{className:"text-white",children:[e.jsx("span",{className:"text-slate-400",children:"Base:"})," $",s.basePricePerToken]}),e.jsxs("p",{className:"text-white font-bold",children:[e.jsx("span",{className:"text-slate-400",children:"Final:"})," $",s.finalPricePerToken]}),e.jsx("p",{className:"text-blue-300",children:s.currency})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>{K(s),C(!0)},className:"border-blue-500 text-blue-400 hover:bg-blue-600 hover:text-white",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>se.mutate(s.id),className:"border-red-500 text-red-400 hover:bg-red-600 hover:text-white",disabled:se.isPending,children:e.jsx(Te,{className:"w-4 h-4"})})]})]})})},s.id))}),n&&e.jsx(q,{open:de,onOpenChange:C,children:e.jsxs(L,{className:"bg-slate-800 border-slate-600",children:[e.jsxs($,{children:[e.jsx(M,{className:"text-white",children:"Edit Pricing Tier"}),e.jsx(A,{className:"text-slate-300",children:"Modify the pricing tier configuration"})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),he(new FormData(s.currentTarget))},children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"edit-tierName",className:"text-white",children:"Tier Name"}),e.jsx(r,{id:"edit-tierName",name:"tierName",defaultValue:n.tierName,className:"bg-slate-700 border-slate-600 text-white",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"edit-basePricePerToken",className:"text-white",children:"Base Price ($)"}),e.jsx(r,{id:"edit-basePricePerToken",name:"basePricePerToken",type:"number",step:"0.01",defaultValue:n.basePricePerToken,className:"bg-slate-700 border-slate-600 text-white",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"edit-minQuantity",className:"text-white",children:"Min Quantity"}),e.jsx(r,{id:"edit-minQuantity",name:"minQuantity",type:"number",min:"1",defaultValue:n.minQuantity,className:"bg-slate-700 border-slate-600 text-white",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"edit-maxQuantity",className:"text-white",children:"Max Quantity"}),e.jsx(r,{id:"edit-maxQuantity",name:"maxQuantity",type:"number",defaultValue:n.maxQuantity||"",placeholder:"Leave empty for unlimited",className:"bg-slate-700 border-slate-600 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"edit-discountPercentage",className:"text-white",children:"Discount %"}),e.jsx(r,{id:"edit-discountPercentage",name:"discountPercentage",type:"number",min:"0",max:"100",step:"0.1",defaultValue:n.discountPercentage,className:"bg-slate-700 border-slate-600 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"edit-currency",className:"text-white",children:"Currency"}),e.jsxs(R,{name:"currency",defaultValue:n.currency,children:[e.jsx(V,{className:"bg-slate-700 border-slate-600 text-white",children:e.jsx(B,{})}),e.jsxs(z,{children:[e.jsx(h,{value:"USD",children:"USD"}),e.jsx(h,{value:"SOL",children:"SOL"}),e.jsx(h,{value:"USDC",children:"USDC"}),e.jsx(h,{value:"FLBY",children:"FLBY"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(a,{htmlFor:"edit-sortOrder",className:"text-white",children:"Sort Order"}),e.jsx(r,{id:"edit-sortOrder",name:"sortOrder",type:"number",min:"0",defaultValue:n.sortOrder,className:"bg-slate-700 border-slate-600 text-white"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ne,{id:"edit-gasFeeIncluded",name:"gasFeeIncluded",defaultChecked:n.gasFeeIncluded}),e.jsx(a,{htmlFor:"edit-gasFeeIncluded",className:"text-white",children:"Include Gas Fees"})]})]}),e.jsx(ce,{children:e.jsx(o,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:I.isPending,children:I.isPending?"Updating...":"Update Tier"})})]})]})})]})})}export{Qe as default};
